<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no"><title>vue3基础知识 | Welcome To LifeTech's Blog</title><meta name="keywords" content="前端学习"><meta name="author" content="Jackey Zhou"><meta name="copyright" content="Jackey Zhou"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#f7f9fe"><meta name="mobile-web-app-capable" content="yes"><meta name="apple-touch-fullscreen" content="yes"><meta name="apple-mobile-web-app-title" content="vue3基础知识"><meta name="application-name" content="vue3基础知识"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="#f7f9fe"><meta property="og:type" content="article"><meta property="og:title" content="vue3基础知识"><meta property="og:url" content="http://example.com/2025/05/12/vue3%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/index.html"><meta property="og:site_name" content="Welcome To LifeTech's Blog"><meta property="og:description" content="Vue 3 常用知识文档 (截至 2025 年 5 月)Vue.js 是一款流行的渐进式 JavaScript 框架，用于构建用户界面。Vue 3 作为其最新版本，带来了许多重要的改进和新特性，旨在提供更好的性能、更小的包体积、更强的 TypeScript 支持以及更灵活的代码组织方式。本文档将详细"><meta property="og:locale" content="zh-CN"><meta property="og:image" content="https://bu.dusays.com/2023/04/27/64496e511b09c.jpg"><meta property="article:author" content="Jackey Zhou"><meta property="article:tag"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://bu.dusays.com/2023/04/27/64496e511b09c.jpg"><meta name="description" content="Vue 3 常用知识文档 (截至 2025 年 5 月)Vue.js 是一款流行的渐进式 JavaScript 框架，用于构建用户界面。Vue 3 作为其最新版本，带来了许多重要的改进和新特性，旨在提供更好的性能、更小的包体积、更强的 TypeScript 支持以及更灵活的代码组织方式。本文档将详细"><link rel="shortcut icon" href="/favicon.ico"><link rel="canonical" href="http://example.com/2025/05/12/vue3%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/"><link rel="preconnect" href="//cdn.cbd.int"/><meta name="google-site-verification" content="xxx"/><meta name="baidu-site-verification" content="code-xxx"/><meta name="msvalidate.01" content="xxx"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.cbd.int/@fancyapps/ui@5.0.28/dist/fancybox/fancybox.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  linkPageTop: undefined,
  peoplecanvas: {"enable":true,"img":"https://upload-bbs.miyoushe.com/upload/2024/07/27/125766904/ba62475f396df9de3316a08ed9e65d86_5680958632268053399..png"},
  postHeadAiDescription: {"enable":true,"gptName":"AnZhiYu","mode":"local","switchBtn":false,"btnLink":"https://afdian.net/item/886a79d4db6711eda42a52540025c377","randomNum":3,"basicWordCount":1000,"key":"xxxx","Referer":"https://xx.xx/"},
  diytitle: {"enable":true,"leaveTitle":"w(ﾟДﾟ)w 不要走！再看看嘛！","backTitle":"♪(^∇^*)欢迎肥来！"},
  LA51: undefined,
  greetingBox: undefined,
  twikooEnvId: '',
  commentBarrageConfig:undefined,
  music_page_default: "nav_music",
  root: '/',
  preloader: {"source":3},
  friends_vue_info: undefined,
  navMusic: true,
  mainTone: undefined,
  authorStatus: undefined,
  algolia: undefined,
  localSearch: undefined,
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简","rightMenuMsgToTraditionalChinese":"转为繁体","rightMenuMsgToSimplifiedChinese":"转为简体"},
  noticeOutdate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":330},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    simplehomepage: true,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"copy":true,"copyrightEbable":false,"limitCount":50,"languages":{"author":"作者: Jackey Zhou","link":"链接: ","source":"来源: Welcome To LifeTech's Blog","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。","copySuccess":"复制成功，复制和转载请标注本文地址"}},
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#425AEF","bgDark":"#1f1f1f","position":"top-center"},
  source: {
    justifiedGallery: {
      js: 'https://cdn.cbd.int/flickr-justified-gallery@2.1.2/dist/fjGallery.min.js',
      css: 'https://cdn.cbd.int/flickr-justified-gallery@2.1.2/dist/fjGallery.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isAnchor: false,
  shortcutKey: undefined,
  autoDarkmode: true
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  configTitle: 'Welcome To LifeTech's Blog',
  title: 'vue3基础知识',
  postAI: '',
  pageFillDescription: 'Vue 3 常用知识文档 (截至 2025 年 5 月), 一、核心概念与新特性, 1. Composition API (组合式 API), 2. Reactivity (响应式系统), 3. 生命周期钩子 (Lifecycle Hooks), 4. Fragments (片段), 5. Teleport (传送门), 6. Suspense (实验性), 7. emits 选项和 defineEmits, 8. v-model 的改进, 9. 全局 API 的变更, 10. Tree-shaking 优化, 11. ltscript setupgt, 二、组件 (Components), 1. Props, 2. Events (事件), 3. Slots (插槽), 4. Provide x2F Inject, 5. 动态组件 (ltcomponent is=...gt), 6. 异步组件 (defineAsyncComponent), 三、模板语法 (Template Syntax), 1. 插值 (Interpolation), 2. 指令 (Directives), 3. 自定义指令 (Custom Directives), 四、路由 (Routing with Vue Router), 1. 安装和基本配置, 2. 路由组件, 3. 编程式导航, 4. 路由参数, 5. 导航守卫 (Navigation Guards), 五、状态管理 (State Management with Pinia), 1. 安装和基本配置, 2. 定义 Store, 3. 在组件中使用 Store, 4. Store 的主要特性, 六、其他重要特性与最佳实践, 1. TypeScript 支持, 2. 性能优化, 3. ltstylegt 标签的 v-bind, 4. 组合式函数 (Composables), 5. 最佳实践建议, 七、从 Vue 2 迁移常用知识文档截至年月是一款流行的渐进式框架用于构建用户界面作为其最新版本带来了许多重要的改进和新特性旨在提供更好的性能更小的包体积更强的支持以及更灵活的代码组织方式本文档将详细介绍的常用知识点一核心概念与新特性组合式是中最引人注目的新特性之一它提供了一种更灵活可组合的方式来组织组件的逻辑尤其适用于大型和复杂的组件与中基于选项的不同允许开发者将相关的逻辑代码组织在一起提高了代码的可读性和可维护性函数是的入口点在组件创建之前执行在和生命周期钩子之前接收和一个对象包含作为参数函数内部声明的响应式状态计算属性方法等都需要显式地通过语句暴露给模板才能使用在函数中不可用因为组件实例尚未创建响应式状态方法访问和暴露给模板优势更好的逻辑组织可以将相关的逻辑如数据获取表单处理等聚合在一起而不是分散在等选项中更好的代码复用可以轻松地将可复用的逻辑提取到自定义的组合式函数通常称为或中更强的支持的函数式特性使得类型推断更加自然和准确响应式系统的响应式系统进行了重写使用了的替代了中的这带来了以下好处性能提升直接代理整个对象而不是遍历对象的每个属性更全面的侦测可以侦测到属性的添加和删除以及数组索引和属性的修改这些在中存在一些限制更精确的更新依赖追踪更加高效核心响应式用于创建一个包装基本数据类型如或对象为响应式数据的对象在中访问其值需要通过属性在模板中使用时会自动解包无需用于创建一个对象的响应式代理返回的是一个代理对象对其属性的访问和修改都是响应式的只能用于对象类型包括数组和等通常用于创建复杂的响应式状态用于创建一个计算属性其值会根据依赖的响应式数据自动更新接受一个函数或者一个包含和函数的对象用于创建可写的计算属性可写的计算属性用于侦听一个或多个响应式数据源可以是对象函数或包含这些的数组并在数据变化时执行回调函数提供了更细粒度的控制如惰性执行深度侦听立即执行等侦听侦听对象的属性需要使用函数侦听整个对象默认深层侦听是默认行为但可以显式指出侦听多个源停止侦听立即执行一个函数并响应式地追踪其依赖当依赖变更时会重新运行该函数不需要显式指定侦听的数据源会自动追踪函数体内访问到的响应式数据适用于需要根据响应式数据自动执行副作用的场景当变化时此函数会自动重新运行模拟变化接受一个对象响应式或普通或返回一个原始对象的只读代理只读代理是深层的对任何嵌套属性的访问都将是只读的和创建浅层响应式对象只有或顶层属性是响应式的内部嵌套的对象不会被深度转换和可以为一个响应式对象的某个属性创建一个这个会与源属性保持同步修改任一方都会影响另一方主要用于将响应式对象的属性传递给组合式函数时保持响应性将一个响应式对象转换为一个普通对象其中对象的每个属性都是指向源对象相应属性的这在从组合式函数返回响应式对象时非常有用以便在解构时保持响应性也会变成现在是一个等价于也是一个生命周期钩子的生命周期钩子在中使用时需要从中导入并以的形式调用例如它们必须在组件的函数同步执行期间被调用描述不需要本身函数在组件实例创建前执行不需要本身函数在组件实例创建前执行组件挂载到之前执行组件挂载到之后执行数据更新导致重新渲染之前执行数据更新导致重新渲染之后执行组件实例卸载之前执行组件实例卸载之后执行当捕获到来自子孙组件的错误时调用仅限开发模式跟踪虚拟重新渲染时调用告诉你是什么触发了更新仅限开发模式当虚拟重新渲染被触发时调用告诉你哪个依赖项触发了更新被缓存的组件激活时调用被缓存的组件失活时调用添加事件监听等清理事件监听定时器等片段组件的模板不再强制要求有单一的根元素这意味着你可以拥有多个顶层节点传送门是一个内置组件允许你将组件的一部分传送到当前组件树之外的某个位置例如标签或其他指定的元素这对于处理模态框通知弹出框等非常有用可以避免样式和的困扰实验性是一个内置组件用于在等待异步组件或异步函数完成时优雅地处理加载状态它可以让你在组件树中定义加载状态并在异步依赖解析完成前显示一个内容它有两个插槽和当插槽中的组件或其依赖的异步操作如异步组件加载函数返回未完成时会显示插槽的内容异步组件示例注意仍然是一个实验性特性其可能会在未来版本中发生变化选项和在中推荐显式声明组件可以触发的事件这有助于更好的代码组织和类型检查使用选项数组或对象简单数组形式或者对象形式可以进行验证使用宏在中或从函数的或带有验证无验证普通仍然建议在选项中声明的改进多个允许在一个组件上使用多个指令对于默认的不带参数它对应和事件自定义修饰符可以为组件的创建自定义修饰符全局的变更对全局进行了调整以更好地支持摇树优化从而减小打包体积现在大多数全局都通过应用实例暴露创建应用实例替代了中的注册全局组件指令等影响等全局现在都通过等方式调用优化的许多特性如的内部帮助函数组件等现在是按需导入的如果你不使用这些特性它们就不会被打包到最终的构建文件中从而减小了应用体积是在单文件组件中使用的编译时语法糖它极大地简化了的使用更简洁的语法不需要函数也不需要显式自动暴露在中声明的顶层绑定变量函数导入的组件会自动暴露给模板和这些宏可以直接在中使用无需导入如果需要显式暴露组件的属性或方法给父组件例如通过模板引用可以使用宏顶层可以在中使用顶层组件会自动被处理为异步组件可以与配合使用导入的组件可以直接在模板中使用二组件组件是应用的核心构建块允许将划分为独立且可复用的部分是父组件向子组件传递数据的方式声明使用选项数组或对象形式使用宏普通函数作为第一个参数传入函数校验可以为指定类型是否必需默认值以及自定义校验函数基础类型检查多个可能的类型必填的字符串带默认值的数字带默认值的对象或数组工厂函数必须是工厂函数自定义验证函数这个值必须匹配下列字符串中的一个带默认值的函数工厂函数返回函数本身单向数据流父组件的更新会向下流动到子组件但子组件不应该直接修改如果需要修改应该一个事件通知父组件进行更改事件子组件通过触发事件与父组件通信触发事件通过获取函数普通函数监听事件在父组件中使用简写指令监听子组件触发的事件或中定义插槽插槽允许父组件向子组件模板中注入内容这使得组件更加灵活和可复用默认插槽子组件中使用标签作为占位符父组件中放在子组件标签内的所有内容都会被插入到这个插槽具名插槽子组件可以使用属性定义多个插槽父组件使用指令简写并指定插槽名称来分发内容作用域插槽允许子组件将数据传递给父组件的插槽内容父组件通过接收这些数据示例可以是循环的在中如果只有一个默认插槽且需要作用域可以直接在组件标签上使用和用于解决组件层级较深时数据传递的问题一个祖先组件可以作为依赖提供者其所有后代组件都可以注入它所提供的依赖无论层级多深使用选项函数形式可以访问使用函数可以提供响应式数据也可以提供方法使用选项数组或对象形式使用函数注入可以提供默认值工厂函数作为默认值和绑定不是响应式的除非传递的是一个响应式对象如或对象如果希望注入的数据能够响应提供者的变化提供者需要一个或对象动态组件允许根据一个变量的值动态地切换要渲染的组件存储组件名称字符串或者直接存储组件对象推荐使用和优化性能异步组件允许按需加载组件只有在需要渲染时才会下载和解析组件代码这对于优化应用的初始加载时间非常有用带选项的异步组件加载函数加载异步组件时使用的组件一个表示加载中的组件展示加载组件前的延迟时间默认为加载失败后展示的组件如果提供了一个时间限制并超时了也会显示这里配置的报错组件默认为三模板语法使用一种基于的模板语法允许开发者声明式地将绑定到底层组件实例的数据插值文本使用双大括号语法原始使用指令注意动态渲染任意是非常危险的因为它很容易导致攻击只在内容安全可靠的情况下使用并且永远不要用它来渲染用户提交的内容不能在中使用应使用指令指令指令是带有前缀的特殊指令的值预期是单个表达式除了和它们有特殊的语法更新元素的等价于更新元素的如上所述注意安全风险根据表达式的真假值切换元素的属性元素始终会被渲染并保留在中条件渲染根据表达式的值惰性地创建或销毁元素组件是真正的条件渲染因为它会确保在切换过程中条件块内的事件监听器和子组件适当地被销毁和重建也是惰性的如果在初始渲染时条件为假则什么也不做直到条件第一次变为真时才会开始渲染条件块可以与元素一起使用以渲染包含多个元素的条件块列表渲染基于源数据多次渲染元素或模板块可以遍历数组和对象需要一个特殊的以便可以跟踪每个节点的身份从而重用和重新排序现有元素应该是唯一的字符串或数字简写事件监听用于监听事件并在触发时运行一些代码常用的事件修饰符常用的按键修饰符捕获删除和退格键也可以使用系统修饰键简写动态绑定用于动态地绑定一个或多个或一个组件到表达式对于和支持数组和对象语法双向数据绑定通常用在表单输入元素和自定义组件上它会根据控件类型自动选取正确的方法来更新元素本质上是语法糖背后是或特定元素的特定和或特定元素的特定修饰符取代监听事件将输入值自动转换为数字自动过滤用户输入的首尾空白字符简写用于具名插槽和作用域插槽见组件插槽部分跳过该元素及其所有子元素的编译可以用来显示原始标签这个指令保持在元素上直到关联组件实例结束编译和规则如一起用时它可以隐藏未编译的标签直到组件实例准备完毕只渲染元素和组件一次随后的重新渲染元素组件及其所有的子节点将被视为静态内容并跳过这可以用于优化更新性能自定义指令除了核心指令也允许注册自定义指令自定义指令提供了一种机制用于将底层的操作封装起来注册全局注册局部注册组件内使用选项或在中以的形式命名函数或对象钩子函数自定义指令可以定义以下钩子函数它们会在指令绑定到元素的不同阶段被调用在绑定元素的或事件监听器被应用之前调用当指令第一次绑定到元素并且在挂载父组件之前调用在绑定元素的父组件被挂载后调用在更新包含组件的之前调用在包含组件的及其子组件的更新后调用在卸载绑定元素的父组件之前调用当指令与元素解除绑定且父组件已卸载时调用钩子函数的参数指令所绑定的元素可以直接操作一个对象包含以下属性指令的绑定值例如中的值是之前的值仅在和中可用传递给指令的参数如果存在例如的值是一个包含修饰符的对象如果存在例如的值是使用该指令的组件实例指令的定义对象代表绑定元素的底层代表之前的渲染中指令所绑定元素的仅在和钩子中可用局部自定义指令指令会自动注册名称为驼峰命名会自动转换为在元素挂载后自动聚焦它如果自定义指令只需要和行为且行为相同并且不需要访问的其他属性可以提供一个函数简写这会在和时都调用四路由是的官方路由管理器它与核心深度集成让构建单页面应用变得易如反掌安装和基本配置使用也可以使用路由懒加载动态路由匹配是动态段将路由参数作为传递给组件编程式导航嵌套路由捕获所有路由或推荐的捕获所有写法模式模式滚动行为导入路由使用路由路由组件用于声明式导航它会被渲染为一个标签目标路由的路径或命名的路由对象链接激活时应用的类名默认为精确激活时应用的类名默认为路由出口路由匹配到的组件将在这里渲染可以传递属性用于命名视图用于一个路由匹配多个组件的情况编程式导航可以在中通过实例的方法进行导航在或函数中替换当前历史记录后退一步在中路由参数获取当前路由信息对象包含路径参数查询参数哈希等信息将参数作为传递在路由配置中设置路由参数会自动作为传递给组件路由配置或取决于你的需求和转换导航守卫提供了导航守卫主要用来通过跳转或取消的方式守卫导航有多种机会植入路由导航过程中全局的单个路由独享的或者组件级的全局前置守卫即将要进入的目标路由对象当前导航正要离开的路由对象函数必须调用该方法来这个钩子进行管道中的下一个钩子中断当前的导航或跳转到一个不同的地址如果传入的参数是一个实例则导航会被终止且该错误会被传递给注册过的回调全局解析守卫在所有组件内守卫和异步路由组件被解析之后调用全局后置钩子没有函数也不会改变导航本身路由独享守卫在路由配置中直接定义组件内守卫在组件选项或中定义在渲染该组件的对应路由被验证前调用不能获取组件实例因为当守卫执行前组件实例还没被创建但是你可以通过传一个回调给来访问组件实例在当前路由改变但是该组件被复用时调用例如对于一个带有动态参数的路径在和之间跳转的时候可以访问组件实例导航离开该组件的对应路由时调用可以访问组件实例通常用于提示用户保存未保存的修改通过访问组件实例可用可用注意在中没有直接对应因为函数在组件实例创建前执行可以进行类似逻辑如果需要在导航完成后访问组件实例通常在之后结合或在返回的后操作或者如果需要阻止导航可以在中通过或路由配置的实现五状态管理是官方推荐的状态管理库它是一个轻量级模块化类型安全且对支持友好的状态管理方案它基于设计与配合得非常好安装和基本配置导入创建实例使用定义仓库是用定义的它需要一个唯一的名称作为第一个参数可以使用函数推荐命名规范等同于或等同于等同于模拟调用必须返回所有需要暴露给外部的也可以使用的写法更像可以访问其他中指向实例中指向实例在组件中使用导入用于保持响应性解构获取实例直接访问和它们是响应式的调用为了在模板中使用并保持响应性或者从中解构属性直接使用使用来创建可以直接解构或者或者可以在中调用初始化的主要特性类型安全对有很好的支持支持与集成良好可以方便地查看和跟踪模块化每个都是一个独立的模块易于组织和维护轻量级非常小的体积插件系统可以通过插件扩展的功能服务器端渲染支持支持直接修改可以直接修改的例如这在中通常不推荐的仍然可以跟踪这些更改订阅变化订阅调用重置仅适用于写法且定义了函数对于需要手动实现重置逻辑热模块替换支持在开发过程中修改代码无需刷新页面的设计哲学是提供一个简单直观的同时保持强大的功能和灵活性使其成为项目中状态管理的首选六其他重要特性与最佳实践支持从一开始就考虑了支持其设计对类型推断非常友好特别是等宏在中都提供了良好的类型支持性能优化更小的包体积通过和新的全局设计更快的渲染静态树提升更新类型标记缓存事件处理函数等编译时优化更高效的响应式系统基于虚拟重写提高了算法的效率标签的可以在的标签中使用将值链接到组件的动态状态将绑定到也可以使用带引号的表达式这使得基于组件状态动态调整样式变得非常方便而无需内联样式或复杂的绑定组合式函数组合式函数是利用封装和复用有状态逻辑的函数它们是组织和共享跨组件逻辑的强大模式命名约定通常以开头例如功能可以包含响应式状态可以包含计算属性可以包含方法可以包含生命周期钩子等可以调用其他组合式函数返回值通常返回一个包含响应式状态和方法的对象供组件解构使用暴露响应式状态组合式函数是核心优势之一极大地提升了应用中逻辑复用的能力和代码组织的清晰度最佳实践建议拥抱特别是对于中大型组件和需要逻辑复用的场景是推荐的语法合理组织代码将可复用的逻辑提取到组合式函数中将相关的模块化显式声明和增强组件接口的清晰度和可维护性使用在中始终提供唯一的路由懒加载对于大型应用使用路由懒加载来优化初始加载时间组件尽可能小而专注遵循单一职责原则利用进行调试和性能分析编写单元测试和端到端测试保证代码质量关注性能对于大型列表考虑虚拟滚动使用对于不更新的静态内容合理使用和注意属性的缓存特性保持依赖更新定期更新和相关库到最新稳定版本以获得最新的特性和安全修复七从迁移对于从迁移到的项目官方提供了一个迁移指南和迁移构建版本它提供了与兼容的行为帮助逐步迁移主要关注点包括全局的变更的变化选项的必要性插槽语法的变化从到指令生命周期钩子的名称变化例如变为响应式系统的一些底层差异特别是对于数组和对象的某些边缘情况移除支持推荐使用移除实例方法推荐使用外部库如或实现事件总线过滤器被移除推荐使用方法调用或计算属性替代建议详细阅读官方迁移文档以获得全面的指导本文档涵盖了的大部分常用知识点希望能为你的开发之旅提供有力的支持随着生态的不断发展建议持续关注官方文档和社区动态以获取最新的信息和最佳实践好的这是一份详细的常用知识文档涵盖了核心概念常用库以及一些最佳实践常用知识点详解通常称为是一个用于构建用户界面的渐进式框架与庞大的框架不同被设计为可以自底向上逐层应用的核心库只关注视图层易于上手也便于与第三方库或既有项目整合另一方面当与现代化的工具链以及各种支持类库结合使用时也完全能够为复杂的单页应用提供驱动是的最新主要版本带来了显著的性能改进更好的支持新的如以及一些新功能一核心概念创建应用实例每个应用都是通过函数创建一个新的应用实例开始的根组件挂载到元素根组件是整个应用组件树的起点模板语法使用一种基于的模板语法允许开发者声明式地将绑定至底层实例的数据文本插值使用双大括号语法显示数据属性绑定使用指令简写动态绑定属性事件监听使用指令简写监听事件条件渲染使用控制元素的渲染使用控制元素的属性列表渲染使用遍历数组或对象来渲染列表务必提供以获得最佳性能和行为表单输入绑定使用在表单元素上创建双向数据绑定响应式基础最独特的特性之一是其响应式系统当组件的状态数据发生变化时视图会自动更新使用来实现响应式这比的更强大性能更好用于创建基本类型等或对象的响应式引用访问或修改的值需要通过属性在模板中使用时不需要会自动解包用于创建对象或数组的响应式代理它会深度转换对象内部嵌套的对象也会是响应式的返回的是代理对象直接访问属性即可不需要限制不能应用于基本类型创建的代理对象与原始对象不全等用于声明基于其他响应式数据计算而来的计算属性计算属性具有缓存特性只有当其依赖的响应式数据发生变化时才会重新计算只在依赖变化时执行用于侦听响应式数据的变化并执行副作用如调用操作需要明确指定要侦听的数据源并在回调函数中接收新值和旧值它默认是惰性的只在数据变化后执行会立即执行一次回调函数并自动追踪回调函数中使用的所有响应式依赖当任何依赖变化时回调会重新执行会触发再次执行组件基础组件允许我们将划分为独立的可重用的部分单文件组件文件是的标准组件格式它将模板逻辑和样式封装在同一个文件中父组件向子组件传递数据的方式子组件需要在选项或在中中声明它期望接收的使用宏声明可以指定类型可以使用对象语法进行更详细的验证可以直接在模板或脚本中使用事件子组件向父组件发送消息通知事件发生的方式子组件使用方法或在中触发事件父组件使用或监听使用宏声明要触发的事件触发事件并传递数据生命周期钩子每个组件实例在创建时都会经历一系列初始化步骤生命周期钩子允许我们在特定阶段添加自己的代码常用钩子组件挂载插入完成后调用适合执行需要的操作数据获取等组件因为响应式状态变更而更新其树之后调用组件实例被卸载从移除之后调用适合清理定时器事件监听器等其他在中使用访问或启动定时器等清理工作在中使用二组合式是引入的一套新的基于函数的旨在解决在大型应用中逻辑组织和复用方面的限制函数的入口点它在组件实例创建之前执行在和之间接收和包含作为参数函数内部定义的响应式状态计算属性方法等需要显式返回才能在模板中使用内部不是指向组件实例通常是现在更推荐使用语法糖是函数的语法糖极大简化了的使用在中声明的顶层变量函数和导入的组件都自动暴露给模板不需要显式返回代码更简洁更符合直觉是目前在中使用的推荐方式导入的组件自动可用响应式状态方法生命周期钩子无需响应式工具函数除了之外还有将一个响应式对象创建的转换为一个普通对象其中每个属性都是指向原始对象相应属性的常用于解构对象而保持响应性用于检查对象的响应式类型创建一个对象的只读代理依赖注入允许一个祖先组件向其所有后代组件注入数据或方法无论层级有多深在祖先组件中提供数据方法在后代组件中注入数据方法常用于跨多层级组件共享状态或功能避免逐层传递三常用库生态路由的官方路由管理器用于构建单页应用核心概念路由定义定义路径与组件之间的映射关系用于声明式导航的组件会渲染成标签路由匹配到的组件将在此处渲染编程式导航使用等进行导航导航守卫在导航过程中执行的钩子函数用于权限控制数据获取等是为设计的版本状态管理的新一代官方状态管理库由核心团队维护推荐用于新的项目取代核心概念定义一个包含状态计算属性和方法的模块用于定义一个响应式数据源类似于的计算属性类似于的方法可以包含异步操作模块化天然支持模块化无需手动组合更好的支持提供了优秀的类型推断更简洁的使用起来更简单直观示例使用使用普通函数暴露在组件中使用四高级常用特性插槽允许父组件向子组件的模板中注入内容使组件更具灵活性和可复用性默认插槽子组件中使用作为内容出口具名插槽子组件使用定义命名出口父组件使用或语法向特定插槽提供内容作用域插槽允许子组件在渲染插槽内容时向父组件传递数据父组件通过接收自定义指令允许你封装可重用的底层操作逻辑通过的形式在模板中使用定义指令时可以提供等钩子函数接收绑定的元素和指令信息等参数定义一个局部自定义指令在元素挂载后自动聚焦也可以全局注册指令内置组件允许将组件内部的一部分模板传送到结构中的其他位置通常是应用根节点之外如常用于创建模态框通知下拉菜单等需要脱离当前组件结构进行渲染的场景逻辑关系父子组件关系保持不变样式实验性内置组件用于在等待异步组件加载完成时协调渲染备用内容常与异步组件或路由懒加载结合使用提升用户体验异步加载组件五关键改进与最佳实践性能提升通过重写虚拟编译时优化静态提升补丁标志等手段实现了显著的性能提升更快的初始渲染更新更小的内存占用更好的支持的源码本身就是用编写的提供了出色的类型推断和支持尤其是在使用和时拥抱对于新项目或需要更好逻辑复用和组织性的场景优先使用特别是语法使用对于需要状态管理的应用推荐使用利用单文件组件是组织代码的标准和推荐方式代码规范遵循官方推荐的风格指南使用等工具保持代码一致性组件拆分保持组件功能单一体积小便于维护和复用善用官方文档的官方文档非常详细和清晰是学习和解决问题的最佳资源',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2025-05-12 23:29:33',
  postMainColor: '',
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#18171d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#f7f9fe')
        }
      }
      const t = saveToLocal.get('theme')
    
          const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
          const isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
          const isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
          const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

          if (t === undefined) {
            if (isLightMode) activateLightMode()
            else if (isDarkMode) activateDarkMode()
            else if (isNotSpecified || hasNoSupport) {
              const now = new Date()
              const hour = now.getHours()
              const isNight = hour <= 6 || hour >= 18
              isNight ? activateDarkMode() : activateLightMode()
            }
            window.matchMedia('(prefers-color-scheme: dark)').addListener(e => {
              if (saveToLocal.get('theme') === undefined) {
                e.matches ? activateDarkMode() : activateLightMode()
              }
            })
          } else if (t === 'light') activateLightMode()
          else activateDarkMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><meta name="generator" content="Hexo 7.3.0"></head><body data-type="anzhiyu"><div id="web_bg"></div><div id="an_music_bg"></div><div id="loading-box" onclick="document.getElementById(&quot;loading-box&quot;).classList.add(&quot;loaded&quot;)"><div class="loading-bg"><img class="loading-img nolazyload" alt="加载头像" src="https://npm.elemecdn.com/anzhiyu-blog-static@1.0.4/img/avatar.jpg"/><div class="loading-image-dot"></div></div></div><script>const preloader = {
  endLoading: () => {
    document.getElementById('loading-box').classList.add("loaded");
  },
  initLoading: () => {
    document.getElementById('loading-box').classList.remove("loaded")
  }
}
window.addEventListener('load',()=> { preloader.endLoading() })
setTimeout(function(){preloader.endLoading();},10000)

if (true) {
  document.addEventListener('pjax:send', () => { preloader.initLoading() })
  document.addEventListener('pjax:complete', () => { preloader.endLoading() })
}</script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.1.10/progress_bar/progress_bar.css"/><script async="async" src="https://cdn.cbd.int/pace-js@1.2.4/pace.min.js" data-pace-options="{ &quot;restartOnRequestAfter&quot;:false,&quot;eventLag&quot;:false}"></script><div class="post" id="body-wrap"><header class="post-bg" id="page-header"><nav id="nav"><div id="nav-group"><span id="blog_name"><a id="site-name" href="/" accesskey="h"><div class="title">Welcome To LifeTech's Blog</div><i class="anzhiyufont anzhiyu-icon-house-chimney"></i></a></span><div class="mask-name-container"><div id="name-container"><a id="page-name" href="javascript:anzhiyu.scrollToDest(0, 500)">PAGE_NAME</a></div></div><div id="menus"></div><div id="nav-right"><div class="nav-button" id="randomPost_button"><a class="site-page" onclick="toRandomPost()" title="随机前往一个文章" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-dice"></i></a></div><input id="center-console" type="checkbox"/><label class="widget" for="center-console" title="中控台" onclick="anzhiyu.switchConsole();"><i class="left"></i><i class="widget center"></i><i class="widget right"></i></label><div id="console"><div class="console-card-group-reward"><ul class="reward-all console-card"><li class="reward-item"><a href="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-weichat.png" target="_blank"><img class="post-qr-code-img" alt="微信" src="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-weichat.png"/></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-alipay.png" target="_blank"><img class="post-qr-code-img" alt="支付宝" src="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-alipay.png"/></a><div class="post-qr-code-desc">支付宝</div></li></ul></div><div class="console-card-group"><div class="console-card-group-left"><div class="console-card" id="card-newest-comments"><div class="card-content"><div class="author-content-item-tips">互动</div><span class="author-content-item-title"> 最新评论</span></div><div class="aside-list"><span>正在加载中...</span></div></div></div><div class="console-card-group-right"><div class="console-card tags"><div class="card-content"><div class="author-content-item-tips">兴趣点</div><span class="author-content-item-title">寻找你感兴趣的领域</span><div class="card-tags"><div class="item-headline"></div><div class="card-tag-cloud"><a href="/tags/CSharp%E5%AD%A6%E4%B9%A0/" style="font-size: 1.05rem;">CSharp学习<sup>3</sup></a><a href="/tags/IDE%E5%B8%B8%E7%94%A8%E5%BF%AB%E6%8D%B7%E9%94%AE/" style="font-size: 1.05rem;">IDE常用快捷键<sup>2</sup></a><a href="/tags/Rust%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/" style="font-size: 1.05rem;">Rust基础知识<sup>21</sup></a><a href="/tags/csharp%E7%9B%B8%E5%85%B3%E5%AD%A6%E4%B9%A0/" style="font-size: 1.05rem;">csharp相关学习<sup>5</sup></a><a href="/tags/docker%E5%AD%A6%E4%B9%A0/" style="font-size: 1.05rem;">docker学习<sup>1</sup></a><a href="/tags/hexo%E5%8D%9A%E5%AE%A2%E5%B8%B8%E8%A7%81%E5%91%BD%E4%BB%A4/" style="font-size: 1.05rem;">hexo博客常见命令<sup>1</sup></a><a href="/tags/python%E7%9B%B8%E5%85%B3%E5%AD%A6%E4%B9%A0/" style="font-size: 1.05rem;">python相关学习<sup>4</sup></a><a href="/tags/tauri%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/" style="font-size: 1.05rem;">tauri基础知识<sup>1</sup></a><a href="/tags/xmake%E5%AD%A6%E4%B9%A0/" style="font-size: 1.05rem;">xmake学习<sup>3</sup></a><a href="/tags/%E4%B8%AA%E4%BA%BA%E5%AD%A6%E4%B9%A0/" style="font-size: 1.05rem;">个人学习<sup>1</sup></a><a href="/tags/%E5%89%8D%E7%AB%AF%E5%AD%A6%E4%B9%A0/" style="font-size: 1.05rem;">前端学习<sup>1</sup></a><a href="/tags/%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/" style="font-size: 1.05rem;">数据分析<sup>1</sup></a><a href="/tags/%E6%97%A0%E7%BA%BF%E8%B0%83%E8%AF%95/" style="font-size: 1.05rem;">无线调试<sup>1</sup></a><a href="/tags/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/" style="font-size: 1.05rem;">深度学习<sup>1</sup></a><a href="/tags/%E7%B3%BB%E7%BB%9F%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/" style="font-size: 1.05rem;">系统常用命令<sup>2</sup></a><a href="/tags/%E7%B3%BB%E7%BB%9F%E5%B8%B8%E7%94%A8%E5%BF%AB%E6%8D%B7%E9%94%AE/" style="font-size: 1.05rem;">系统常用快捷键<sup>2</sup></a></div></div><hr/></div></div><div class="console-card history"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-box-archiv"></i><span>文章</span></div><div class="card-archives"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-archive"></i><span>归档</span></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/05/"><span class="card-archive-list-date">五月 2025</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">32</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/12/"><span class="card-archive-list-date">十二月 2024</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">3</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/11/"><span class="card-archive-list-date">十一月 2024</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">5</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/10/"><span class="card-archive-list-date">十月 2024</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">12</span><span>篇</span></div></a></li></ul></div><hr/></div></div></div><div class="button-group"><div class="console-btn-item"><a class="darkmode_switchbutton" title="显示模式切换" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-moon"></i></a></div><div class="console-btn-item" id="consoleHideAside" onclick="anzhiyu.hideAsideBtn()" title="边栏显示控制"><a class="asideSwitch"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></a></div><div class="console-btn-item" id="consoleMusic" onclick="anzhiyu.musicToggle()" title="音乐开关"><a class="music-switch"><i class="anzhiyufont anzhiyu-icon-music"></i></a></div></div><div class="console-mask" onclick="anzhiyu.hideConsole()" href="javascript:void(0);"></div></div><div class="nav-button" id="nav-totop"><a class="totopbtn" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i><span id="percent" onclick="anzhiyu.scrollToDest(0,500)">0</span></a></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);" title="切换"><i class="anzhiyufont anzhiyu-icon-bars"></i></a></div></div></div></nav><div id="post-info"><div id="post-firstinfo"><div class="meta-firstline"><a class="post-meta-original">原创</a><span class="article-meta tags"><a class="article-meta__tags" href="/tags/%E5%89%8D%E7%AB%AF%E5%AD%A6%E4%B9%A0/" tabindex="-1" itemprop="url"> <span> <i class="anzhiyufont anzhiyu-icon-hashtag"></i>前端学习</span></a></span></div></div><h1 class="post-title" itemprop="name headline">vue3基础知识</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="anzhiyufont anzhiyu-icon-calendar-days post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" itemprop="dateCreated datePublished" datetime="2025-05-12T15:28:53.000Z" title="发表于 2025-05-12 23:28:53">2025-05-12</time><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-history post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" itemprop="dateCreated datePublished" datetime="2025-05-12T15:29:33.477Z" title="更新于 2025-05-12 23:29:33">2025-05-12</time></span></div><div class="meta-secondline"><span class="post-meta-separator">       </span><span class="post-meta-position" title="作者IP属地为无锡"><i class="anzhiyufont anzhiyu-icon-location-dot"></i>无锡</span></div></div></div><section class="main-hero-waves-area waves-area"><svg class="waves-svg" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M -160 44 c 30 0 58 -18 88 -18 s 58 18 88 18 s 58 -18 88 -18 s 58 18 88 18 v 44 h -352 Z"></path></defs><g class="parallax"><use href="#gentle-wave" x="48" y="0"></use><use href="#gentle-wave" x="48" y="3"></use><use href="#gentle-wave" x="48" y="5"></use><use href="#gentle-wave" x="48" y="7"></use></g></svg></section><div id="post-top-cover"><img class="nolazyload" id="post-top-bg" src=""></div></header><main id="blog-container"><div class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container" itemscope itemtype="http://example.com/2025/05/12/vue3%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/"><header><a href="/tags/%E5%89%8D%E7%AB%AF%E5%AD%A6%E4%B9%A0/" tabindex="-1" itemprop="url">前端学习</a><h1 id="CrawlerTitle" itemprop="name headline">vue3基础知识</h1><span itemprop="author" itemscope itemtype="http://schema.org/Person">Jackey Zhou</span><time itemprop="dateCreated datePublished" datetime="2025-05-12T15:28:53.000Z" title="发表于 2025-05-12 23:28:53">2025-05-12</time><time itemprop="dateCreated datePublished" datetime="2025-05-12T15:29:33.477Z" title="更新于 2025-05-12 23:29:33">2025-05-12</time></header><h2 id="Vue-3-常用知识文档-截至-2025-年-5-月"><a href="#Vue-3-常用知识文档-截至-2025-年-5-月" class="headerlink" title="Vue 3 常用知识文档 (截至 2025 年 5 月)"></a>Vue 3 常用知识文档 (截至 2025 年 5 月)</h2><p>Vue.js 是一款流行的渐进式 JavaScript 框架，用于构建用户界面。Vue 3 作为其最新版本，带来了许多重要的改进和新特性，旨在提供更好的性能、更小的包体积、更强的 TypeScript 支持以及更灵活的代码组织方式。本文档将详细介绍 Vue 3 的常用知识点。</p>
<h3 id="一、核心概念与新特性"><a href="#一、核心概念与新特性" class="headerlink" title="一、核心概念与新特性"></a>一、核心概念与新特性</h3><h4 id="1-Composition-API-组合式-API"><a href="#1-Composition-API-组合式-API" class="headerlink" title="1. Composition API (组合式 API)"></a>1. Composition API (组合式 API)</h4><p>Composition API 是 Vue 3 中最引人注目的新特性之一。它提供了一种更灵活、可组合的方式来组织组件的逻辑，尤其适用于大型和复杂的组件。与 Vue 2 中基于选项的 Options API 不同，Composition API 允许开发者将相关的逻辑代码组织在一起，提高了代码的可读性和可维护性。</p>
<ul>
<li><p><strong><code>setup</code> 函数</strong>:</p>
<ul>
<li>是 Composition API 的入口点，在组件创建之前执行 (在 <code>beforeCreate</code> 和 <code>created</code> 生命周期钩子之前)。</li>
<li>接收 <code>props</code> 和一个 <code>context</code> 对象 (包含 <code>attrs</code>, <code>slots</code>, <code>emit</code>) 作为参数。</li>
<li>函数内部声明的响应式状态、计算属性、方法等，都需要显式地通过 <code>return</code> 语句暴露给模板才能使用。</li>
<li><code>this</code> 在 <code>setup</code> 函数中不可用，因为组件实例尚未创建。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; ref, computed &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="attr">props</span>: &#123;</span><br><span class="line">    <span class="attr">message</span>: <span class="title class_">String</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">setup</span>(<span class="params">props, context</span>) &#123;</span><br><span class="line">    <span class="comment">// 响应式状态</span></span><br><span class="line">    <span class="keyword">const</span> count = <span class="title function_">ref</span>(<span class="number">0</span>);</span><br><span class="line">    <span class="keyword">const</span> doubleCount = <span class="title function_">computed</span>(<span class="function">() =&gt;</span> count.<span class="property">value</span> * <span class="number">2</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 方法</span></span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">increment</span>(<span class="params"></span>) &#123;</span><br><span class="line">      count.<span class="property">value</span>++;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 访问 props 和 context</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(props.<span class="property">message</span>);</span><br><span class="line">    <span class="comment">// context.emit(&#x27;eventName&#x27;);</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 暴露给模板</span></span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      count,</span><br><span class="line">      doubleCount,</span><br><span class="line">      increment,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>优势</strong>:</p>
<ul>
<li><strong>更好的逻辑组织</strong>: 可以将相关的逻辑（如数据获取、表单处理等）聚合在一起，而不是分散在 <code>data</code>、<code>methods</code>、<code>computed</code>、<code>watch</code> 等选项中。</li>
<li><strong>更好的代码复用</strong>: 可以轻松地将可复用的逻辑提取到自定义的 Composition Functions (组合式函数，通常称为 “Hooks” 或 “Composables”) 中。</li>
<li><strong>更强的 TypeScript 支持</strong>: Composition API 的函数式特性使得类型推断更加自然和准确。</li>
</ul>
</li>
</ul>
<h4 id="2-Reactivity-响应式系统"><a href="#2-Reactivity-响应式系统" class="headerlink" title="2. Reactivity (响应式系统)"></a>2. Reactivity (响应式系统)</h4><p>Vue 3 的响应式系统进行了重写，使用了 ES6 的 <code>Proxy</code> 替代了 Vue 2 中的 <code>Object.defineProperty</code>。这带来了以下好处：</p>
<ul>
<li><strong>性能提升</strong>: <code>Proxy</code> 直接代理整个对象，而不是遍历对象的每个属性。</li>
<li><strong>更全面的侦测</strong>: <code>Proxy</code> 可以侦测到属性的添加和删除，以及数组索引和 <code>length</code> 属性的修改，这些在 Vue 2 中存在一些限制。</li>
<li><strong>更精确的更新</strong>: 依赖追踪更加高效。</li>
</ul>
<p>核心响应式 API：</p>
<ul>
<li><p><strong><code>ref</code></strong>:</p>
<ul>
<li>用于创建一个包装基本数据类型 (如 <code>string</code>, <code>number</code>, <code>boolean</code>) 或对象为响应式数据的对象。</li>
<li>在 JavaScript 中访问其值需要通过 <code>.value</code> 属性。</li>
<li>在模板中使用时，会自动解包，无需 <code>.value</code>。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; ref &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> count = <span class="title function_">ref</span>(<span class="number">0</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(count.<span class="property">value</span>); <span class="comment">// 0</span></span><br><span class="line">count.<span class="property">value</span>++;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(count.<span class="property">value</span>); <span class="comment">// 1</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong><code>reactive</code></strong>:</p>
<ul>
<li>用于创建一个对象的响应式代理。</li>
<li>返回的是一个代理对象，对其属性的访问和修改都是响应式的。</li>
<li>只能用于对象类型 (包括数组和 <code>Map</code>, <code>Set</code> 等)。</li>
<li>通常用于创建复杂的响应式状态。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; reactive &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> state = <span class="title function_">reactive</span>(&#123;</span><br><span class="line">  <span class="attr">user</span>: &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&quot;Vue&quot;</span>,</span><br><span class="line">    <span class="attr">age</span>: <span class="number">3</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">hobbies</span>: [<span class="string">&quot;coding&quot;</span>, <span class="string">&quot;reading&quot;</span>],</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(state.<span class="property">user</span>.<span class="property">name</span>); <span class="comment">// Vue</span></span><br><span class="line">state.<span class="property">user</span>.<span class="property">age</span>++;</span><br><span class="line">state.<span class="property">hobbies</span>.<span class="title function_">push</span>(<span class="string">&quot;sports&quot;</span>);</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong><code>computed</code></strong>:</p>
<ul>
<li>用于创建一个计算属性，其值会根据依赖的响应式数据自动更新。</li>
<li>接受一个 getter 函数，或者一个包含 <code>get</code> 和 <code>set</code> 函数的对象 (用于创建可写的计算属性)。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; ref, computed &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> price = <span class="title function_">ref</span>(<span class="number">10</span>);</span><br><span class="line"><span class="keyword">const</span> quantity = <span class="title function_">ref</span>(<span class="number">2</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> totalPrice = <span class="title function_">computed</span>(<span class="function">() =&gt;</span> price.<span class="property">value</span> * quantity.<span class="property">value</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(totalPrice.<span class="property">value</span>); <span class="comment">// 20</span></span><br><span class="line"></span><br><span class="line">price.<span class="property">value</span> = <span class="number">12</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(totalPrice.<span class="property">value</span>); <span class="comment">// 24</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 可写的计算属性</span></span><br><span class="line"><span class="keyword">const</span> fullName = <span class="title function_">computed</span>(&#123;</span><br><span class="line">  <span class="attr">get</span>: <span class="function">() =&gt;</span> <span class="string">`<span class="subst">$&#123;firstName.value&#125;</span> <span class="subst">$&#123;lastName.value&#125;</span>`</span>,</span><br><span class="line">  <span class="attr">set</span>: <span class="function">(<span class="params">newValue</span>) =&gt;</span> &#123;</span><br><span class="line">    [firstName.<span class="property">value</span>, lastName.<span class="property">value</span>] = newValue.<span class="title function_">split</span>(<span class="string">&quot; &quot;</span>);</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong><code>watch</code></strong>:</p>
<ul>
<li>用于侦听一个或多个响应式数据源 (可以是 <code>ref</code>、<code>reactive</code> 对象、getter 函数或包含这些的数组)，并在数据变化时执行回调函数。</li>
<li>提供了更细粒度的控制，如惰性执行、深度侦听、立即执行等。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; ref, reactive, watch &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> count = <span class="title function_">ref</span>(<span class="number">0</span>);</span><br><span class="line"><span class="keyword">const</span> state = <span class="title function_">reactive</span>(&#123; <span class="attr">name</span>: <span class="string">&quot;Vue&quot;</span> &#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 侦听 ref</span></span><br><span class="line"><span class="title function_">watch</span>(count, <span class="function">(<span class="params">newValue, oldValue</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`count changed from <span class="subst">$&#123;oldValue&#125;</span> to <span class="subst">$&#123;newValue&#125;</span>`</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 侦听 reactive 对象的属性 (需要使用 getter 函数)</span></span><br><span class="line"><span class="title function_">watch</span>(</span><br><span class="line">  <span class="function">() =&gt;</span> state.<span class="property">name</span>,</span><br><span class="line">  <span class="function">(<span class="params">newName, oldName</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`state.name changed from <span class="subst">$&#123;oldName&#125;</span> to <span class="subst">$&#123;newName&#125;</span>`</span>);</span><br><span class="line">  &#125;</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 侦听整个 reactive 对象 (默认深层侦听)</span></span><br><span class="line"><span class="title function_">watch</span>(</span><br><span class="line">  state,</span><br><span class="line">  <span class="function">(<span class="params">newState, oldState</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;state changed:&quot;</span>, newState);</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123; <span class="attr">deep</span>: <span class="literal">true</span> &#125;</span><br><span class="line">); <span class="comment">// deep: true 是默认行为，但可以显式指出</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 侦听多个源</span></span><br><span class="line"><span class="title function_">watch</span>(</span><br><span class="line">  [count, <span class="function">() =&gt;</span> state.<span class="property">name</span>],</span><br><span class="line">  <span class="function">(<span class="params">[newCount, newName], [oldCount, oldName]</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`Multiple changes: count=<span class="subst">$&#123;newCount&#125;</span>, name=<span class="subst">$&#123;newName&#125;</span>`</span>);</span><br><span class="line">  &#125;</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 停止侦听</span></span><br><span class="line"><span class="keyword">const</span> unwatch = <span class="title function_">watch</span>(count, <span class="function">() =&gt;</span> &#123;&#125;);</span><br><span class="line"><span class="title function_">unwatch</span>();</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong><code>watchEffect</code></strong>:</p>
<ul>
<li>立即执行一个函数，并响应式地追踪其依赖。当依赖变更时，会重新运行该函数。</li>
<li>不需要显式指定侦听的数据源，Vue 会自动追踪函数体内访问到的响应式数据。</li>
<li>适用于需要根据响应式数据自动执行副作用的场景。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; ref, watchEffect &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> userID = <span class="title function_">ref</span>(<span class="number">1</span>);</span><br><span class="line"><span class="keyword">const</span> userData = <span class="title function_">ref</span>(<span class="literal">null</span>);</span><br><span class="line"></span><br><span class="line"><span class="title function_">watchEffect</span>(<span class="title function_">async</span> () =&gt; &#123;</span><br><span class="line">  <span class="comment">// 当 userID.value 变化时，此函数会自动重新运行</span></span><br><span class="line">  <span class="keyword">const</span> response = <span class="keyword">await</span> <span class="title function_">fetch</span>(<span class="string">`/api/users/<span class="subst">$&#123;userID.value&#125;</span>`</span>);</span><br><span class="line">  userData.<span class="property">value</span> = <span class="keyword">await</span> response.<span class="title function_">json</span>();</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Fetched user data:&quot;</span>, userData.<span class="property">value</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 模拟 userID 变化</span></span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  userID.<span class="property">value</span> = <span class="number">2</span>;</span><br><span class="line">&#125;, <span class="number">2000</span>);</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong><code>readonly</code></strong>: 接受一个对象 (响应式或普通) 或 <code>ref</code>，返回一个原始对象的只读代理。只读代理是深层的：对任何嵌套属性的访问都将是只读的。</p>
</li>
<li><p><strong><code>shallowRef</code></strong> 和 <strong><code>shallowReactive</code></strong>: 创建浅层响应式对象。只有 <code>.value</code> 或顶层属性是响应式的，内部嵌套的对象不会被深度转换。</p>
</li>
<li><p><strong><code>toRef</code></strong> 和 <strong><code>toRefs</code></strong>:</p>
<ul>
<li><code>toRef</code>: 可以为一个响应式对象 (<code>reactive</code>) 的某个属性创建一个 <code>ref</code>。这个 <code>ref</code> 会与源属性保持同步，修改任一方都会影响另一方。主要用于将响应式对象的属性传递给组合式函数时，保持响应性。</li>
<li><code>toRefs</code>: 将一个响应式对象 (<code>reactive</code>) 转换为一个普通对象，其中对象的每个属性都是指向源对象相应属性的 <code>ref</code>。这在从组合式函数返回响应式对象时非常有用，以便在解构时保持响应性。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; reactive, toRef, toRefs &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> state = <span class="title function_">reactive</span>(&#123;</span><br><span class="line">  <span class="attr">foo</span>: <span class="number">1</span>,</span><br><span class="line">  <span class="attr">bar</span>: <span class="number">2</span>,</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> fooRef = <span class="title function_">toRef</span>(state, <span class="string">&quot;foo&quot;</span>);</span><br><span class="line">fooRef.<span class="property">value</span>++; <span class="comment">// state.foo 也会变成 2</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> stateAsRefs = <span class="title function_">toRefs</span>(state);</span><br><span class="line"><span class="comment">// stateAsRefs.foo 现在是一个 ref，等价于 fooRef</span></span><br><span class="line"><span class="comment">// stateAsRefs.bar 也是一个 ref</span></span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="3-生命周期钩子-Lifecycle-Hooks"><a href="#3-生命周期钩子-Lifecycle-Hooks" class="headerlink" title="3. 生命周期钩子 (Lifecycle Hooks)"></a>3. 生命周期钩子 (Lifecycle Hooks)</h4><p>Vue 3 的生命周期钩子在 Composition API 中使用时，需要从 <code>vue</code> 中导入并以 <code>onX</code> 的形式调用，例如 <code>onMounted</code>, <code>onUpdated</code>, <code>onUnmounted</code>。它们必须在组件的 <code>setup</code> 函数同步执行期间被调用。</p>
<table>
<thead>
<tr>
<th>Options API</th>
<th>Composition API (<code>setup</code>)</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td><code>beforeCreate</code></td>
<td>(不需要，<code>setup</code> 本身)</td>
<td><code>setup</code> 函数在组件实例创建前执行</td>
</tr>
<tr>
<td><code>created</code></td>
<td>(不需要，<code>setup</code> 本身)</td>
<td><code>setup</code> 函数在组件实例创建前执行</td>
</tr>
<tr>
<td><code>beforeMount</code></td>
<td><code>onBeforeMount</code></td>
<td>组件挂载到 DOM 之前执行</td>
</tr>
<tr>
<td><code>mounted</code></td>
<td><code>onMounted</code></td>
<td>组件挂载到 DOM 之后执行</td>
</tr>
<tr>
<td><code>beforeUpdate</code></td>
<td><code>onBeforeUpdate</code></td>
<td>数据更新导致 DOM 重新渲染之前执行</td>
</tr>
<tr>
<td><code>updated</code></td>
<td><code>onUpdated</code></td>
<td>数据更新导致 DOM 重新渲染之后执行</td>
</tr>
<tr>
<td><code>beforeUnmount</code></td>
<td><code>onBeforeUnmount</code></td>
<td>组件实例卸载之前执行</td>
</tr>
<tr>
<td><code>unmounted</code></td>
<td><code>onUnmounted</code></td>
<td>组件实例卸载之后执行</td>
</tr>
<tr>
<td><code>errorCaptured</code></td>
<td><code>onErrorCaptured</code></td>
<td>当捕获到来自子孙组件的错误时调用</td>
</tr>
<tr>
<td><code>renderTracked</code></td>
<td><code>onRenderTracked</code></td>
<td>(仅限开发模式) 跟踪虚拟 DOM 重新渲染时调用，告诉你是什么触发了更新</td>
</tr>
<tr>
<td><code>renderTriggered</code></td>
<td><code>onRenderTriggered</code></td>
<td>(仅限开发模式) 当虚拟 DOM 重新渲染被触发时调用，告诉你哪个依赖项触发了更新</td>
</tr>
<tr>
<td><code>activated</code></td>
<td><code>onActivated</code></td>
<td>被 <code>&lt;KeepAlive&gt;</code> 缓存的组件激活时调用</td>
</tr>
<tr>
<td><code>deactivated</code></td>
<td><code>onDeactivated</code></td>
<td>被 <code>&lt;KeepAlive&gt;</code> 缓存的组件失活时调用</td>
</tr>
</tbody></table>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; onMounted, onBeforeUnmount &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="title function_">setup</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title function_">onMounted</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Component is mounted!&quot;</span>);</span><br><span class="line">      <span class="comment">// 添加事件监听等</span></span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="title function_">onBeforeUnmount</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Component is about to be unmounted!&quot;</span>);</span><br><span class="line">      <span class="comment">// 清理事件监听、定时器等</span></span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h4 id="4-Fragments-片段"><a href="#4-Fragments-片段" class="headerlink" title="4. Fragments (片段)"></a>4. Fragments (片段)</h4><p>Vue 3 组件的模板不再强制要求有单一的根元素。这意味着你可以拥有多个顶层节点。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>Paragraph<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">h1</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span>&gt;</span>Paragraph<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="5-Teleport-传送门"><a href="#5-Teleport-传送门" class="headerlink" title="5. Teleport (传送门)"></a>5. Teleport (传送门)</h4><p><code>Teleport</code> 是一个内置组件，允许你将组件的一部分 DOM “传送” 到当前组件 DOM 树之外的某个位置，例如 <code>&lt;body&gt;</code> 标签或其他指定的 DOM 元素。这对于处理模态框、通知、弹出框等非常有用，可以避免 CSS 样式和 <code>z-index</code> 的困扰。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;showModal = true&quot;</span>&gt;</span>Show Modal<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">Teleport</span> <span class="attr">to</span>=<span class="string">&quot;body&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">v_if</span>=<span class="string">&quot;showModal&quot;</span> <span class="attr">class</span>=<span class="string">&quot;modal&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">p</span>&gt;</span>This is a modal!<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;showModal = false&quot;</span>&gt;</span>Close<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">Teleport</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">import</span> &#123; ref &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">setup</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">const</span> showModal = <span class="title function_">ref</span>(<span class="literal">false</span>);</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">return</span> &#123; showModal &#125;;</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">  &#125;;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">  <span class="selector-class">.modal</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">position</span>: fixed;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">top</span>: <span class="number">50%</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">left</span>: <span class="number">50%</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">transform</span>: <span class="built_in">translate</span>(-<span class="number">50%</span>, -<span class="number">50%</span>);</span></span><br><span class="line"><span class="language-css">    <span class="attribute">background-color</span>: white;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">padding</span>: <span class="number">20px</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#ccc</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">z-index</span>: <span class="number">1000</span>;</span></span><br><span class="line"><span class="language-css">  &#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="6-Suspense-实验性"><a href="#6-Suspense-实验性" class="headerlink" title="6. Suspense (实验性)"></a>6. Suspense (实验性)</h4><p><code>Suspense</code> 是一个内置组件，用于在等待异步组件或异步 <code>setup</code> 函数完成时，优雅地处理加载状态。它可以让你在组件树中定义加载状态，并在异步依赖解析完成前显示一个 “fallback” 内容。</p>
<ul>
<li>它有两个插槽：<code>#default</code> 和 <code>#fallback</code>。</li>
<li>当 <code>#default</code> 插槽中的组件或其依赖的异步操作（如异步组件加载、<code>setup</code> 函数返回 Promise）未完成时，会显示 <code>#fallback</code> 插槽的内容。</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">Suspense</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">template</span> #<span class="attr">default</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">AsyncUserProfile</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">template</span> #<span class="attr">fallback</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span>&gt;</span>Loading user profile...<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">Suspense</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">import</span> &#123; defineAsyncComponent &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="comment">// 异步组件示例</span></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">const</span> <span class="title class_">AsyncUserProfile</span> = <span class="title function_">defineAsyncComponent</span>(<span class="function">() =&gt;</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">import</span>(<span class="string">&quot;./UserProfile.vue&quot;</span>)</span></span><br><span class="line"><span class="language-javascript">  );</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">components</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="title class_">AsyncUserProfile</span>,</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">  &#125;;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>注意</strong>: <code>Suspense</code> 仍然是一个实验性特性，其 API 可能会在未来版本中发生变化。</p>
<h4 id="7-emits-选项和-defineEmits"><a href="#7-emits-选项和-defineEmits" class="headerlink" title="7. emits 选项和 defineEmits"></a>7. emits 选项和 <code>defineEmits</code></h4><p>在 Vue 3 中，推荐显式声明组件可以触发的事件，这有助于更好的代码组织和类型检查。</p>
<ul>
<li><p><strong>Options API</strong>: 使用 <code>emits</code> 选项数组或对象。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="attr">emits</span>: [<span class="string">&quot;updateName&quot;</span>, <span class="string">&quot;closeModal&quot;</span>], <span class="comment">// 简单数组形式</span></span><br><span class="line">  <span class="comment">// 或者对象形式，可以进行验证</span></span><br><span class="line">  <span class="attr">emits</span>: &#123;</span><br><span class="line">    <span class="attr">submit</span>: <span class="function">(<span class="params">payload</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (payload.<span class="property">email</span> &amp;&amp; payload.<span class="property">password</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">warn</span>(<span class="string">&quot;Invalid submit event payload!&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">methods</span>: &#123;</span><br><span class="line">    <span class="title function_">doSomething</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.$emit(<span class="string">&quot;updateName&quot;</span>, <span class="string">&quot;New Name&quot;</span>);</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>Composition API</strong>: 使用 <code>defineEmits</code>宏 (在 <code>&lt;script setup&gt;</code> 中) 或从 <code>setup</code> 函数的 <code>context.emit</code>。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">import</span> &#123; defineEmits &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">const</span> emit = <span class="title function_">defineEmits</span>([<span class="string">&quot;change&quot;</span>, <span class="string">&quot;delete&quot;</span>]);</span></span><br><span class="line"><span class="language-javascript">  <span class="comment">// 或带有验证</span></span></span><br><span class="line"><span class="language-javascript">  <span class="comment">// const emit = defineEmits(&#123;</span></span></span><br><span class="line"><span class="language-javascript">  <span class="comment">//   change: (id) =&gt; typeof id === &#x27;number&#x27;,</span></span></span><br><span class="line"><span class="language-javascript">  <span class="comment">//   delete: null // 无验证</span></span></span><br><span class="line"><span class="language-javascript">  <span class="comment">// &#125;);</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">function</span> <span class="title function_">handleClick</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">emit</span>(<span class="string">&quot;change&quot;</span>, <span class="number">123</span>);</span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 普通 &lt;script&gt; setup()</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="attr">emits</span>: [<span class="string">&quot;myEvent&quot;</span>], <span class="comment">// 仍然建议在选项中声明</span></span><br><span class="line">  <span class="title function_">setup</span>(<span class="params">props, &#123; emit &#125;</span>) &#123;</span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">triggerEvent</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="title function_">emit</span>(<span class="string">&quot;myEvent&quot;</span>, <span class="string">&quot;some data&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> &#123; triggerEvent &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="8-v-model-的改进"><a href="#8-v-model-的改进" class="headerlink" title="8. v-model 的改进"></a>8. <code>v-model</code> 的改进</h4><ul>
<li><p><strong>多个 <code>v-model</code></strong>: Vue 3 允许在一个组件上使用多个 <code>v-model</code> 指令。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">CustomInput</span> <span class="attr">v-model:title</span>=<span class="string">&quot;pageTitle&quot;</span> <span class="attr">v-model:content</span>=<span class="string">&quot;pageContent&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">import</span> &#123; defineProps, defineEmits &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">const</span> props = <span class="title function_">defineProps</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">title</span>: <span class="title class_">String</span>,</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">content</span>: <span class="title class_">String</span>,</span></span><br><span class="line"><span class="language-javascript">  &#125;);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">const</span> emit = <span class="title function_">defineEmits</span>([<span class="string">&quot;update:title&quot;</span>, <span class="string">&quot;update:content&quot;</span>]);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">function</span> <span class="title function_">updateTitle</span>(<span class="params">event</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">emit</span>(<span class="string">&quot;update:title&quot;</span>, event.<span class="property">target</span>.<span class="property">value</span>);</span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">function</span> <span class="title function_">updateContent</span>(<span class="params">event</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">emit</span>(<span class="string">&quot;update:content&quot;</span>, event.<span class="property">target</span>.<span class="property">value</span>);</span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">:value</span>=<span class="string">&quot;title&quot;</span> @<span class="attr">input</span>=<span class="string">&quot;updateTitle&quot;</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">textarea</span> <span class="attr">:value</span>=<span class="string">&quot;content&quot;</span> @<span class="attr">input</span>=<span class="string">&quot;updateContent&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">textarea</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>对于默认的 <code>v-model</code> (不带参数)，它对应 <code>props.modelValue</code> 和 <code>update:modelValue</code> 事件。</p>
</li>
<li><p><strong>自定义 <code>v-model</code> 修饰符</strong>: 可以为组件的 <code>v-model</code> 创建自定义修饰符。</p>
</li>
</ul>
<h4 id="9-全局-API-的变更"><a href="#9-全局-API-的变更" class="headerlink" title="9. 全局 API 的变更"></a>9. 全局 API 的变更</h4><p>Vue 3 对全局 API 进行了调整，以更好地支持 Tree-shaking (摇树优化)，从而减小打包体积。现在，大多数全局 API 都通过应用实例暴露：</p>
<ul>
<li><p><strong>创建应用实例</strong>: <code>createApp</code> 替代了 Vue 2 中的 <code>new Vue()</code>。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createApp &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">&quot;./App.vue&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">createApp</span>(<span class="title class_">App</span>);</span><br><span class="line"><span class="comment">// 注册全局组件、指令等</span></span><br><span class="line"><span class="comment">// app.component(&#x27;GlobalComponent&#x27;, GlobalComponent);</span></span><br><span class="line"><span class="comment">// app.directive(&#x27;global-directive&#x27;, &#123;&#125;);</span></span><br><span class="line"><span class="comment">// app.use(router);</span></span><br><span class="line">app.<span class="title function_">mount</span>(<span class="string">&quot;#app&quot;</span>);</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>影响</strong>: <code>Vue.config</code>、<code>Vue.component</code>、<code>Vue.directive</code>、<code>Vue.mixin</code>、<code>Vue.use</code>、<code>Vue.prototype</code> 等全局 API 现在都通过 <code>app.config</code>、<code>app.component</code> 等方式调用。</p>
</li>
</ul>
<h4 id="10-Tree-shaking-优化"><a href="#10-Tree-shaking-优化" class="headerlink" title="10. Tree-shaking 优化"></a>10. Tree-shaking 优化</h4><p>Vue 3 的许多特性 (如 <code>v-model</code> 的内部帮助函数、<code>&lt;transition&gt;</code> 组件等) 现在是按需导入的。如果你不使用这些特性，它们就不会被打包到最终的构建文件中，从而减小了应用体积。</p>
<h4 id="11"><a href="#11" class="headerlink" title="11. &lt;script setup&gt;"></a>11. <code>&lt;script setup&gt;</code></h4><p><code>&lt;script setup&gt;</code> 是在单文件组件 (SFC) 中使用 Composition API 的编译时语法糖。它极大地简化了 Composition API 的使用：</p>
<ul>
<li><strong>更简洁的语法</strong>: 不需要 <code>setup()</code> 函数，也不需要显式 <code>return</code>。</li>
<li><strong>自动暴露</strong>: 在 <code>&lt;script setup&gt;</code> 中声明的顶层绑定 (变量、函数、导入的组件) 会自动暴露给模板。</li>
<li><strong><code>defineProps</code> 和 <code>defineEmits</code></strong>: 这些宏可以直接在 <code>&lt;script setup&gt;</code> 中使用，无需导入。</li>
<li><strong><code>defineExpose</code></strong>: 如果需要显式暴露组件的属性或方法给父组件 (例如通过模板引用 <code>ref</code>)，可以使用 <code>defineExpose</code> 宏。</li>
<li><strong>顶层 <code>await</code></strong>: 可以在 <code>&lt;script setup&gt;</code> 中使用顶层 <code>await</code>，组件会自动被处理为异步组件，可以与 <code>&lt;Suspense&gt;</code> 配合使用。</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">import</span> &#123;</span></span><br><span class="line"><span class="language-javascript">    ref,</span></span><br><span class="line"><span class="language-javascript">    computed,</span></span><br><span class="line"><span class="language-javascript">    onMounted,</span></span><br><span class="line"><span class="language-javascript">    defineProps,</span></span><br><span class="line"><span class="language-javascript">    defineEmits,</span></span><br><span class="line"><span class="language-javascript">    defineExpose,</span></span><br><span class="line"><span class="language-javascript">  &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">import</span> <span class="title class_">MyComponent</span> <span class="keyword">from</span> <span class="string">&quot;./MyComponent.vue&quot;</span>; <span class="comment">// 导入的组件可以直接在模板中使用</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="comment">// Props</span></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">const</span> props = <span class="title function_">defineProps</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">name</span>: <span class="title class_">String</span>,</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">initialCount</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">type</span>: <span class="title class_">Number</span>,</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">default</span>: <span class="number">0</span>,</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">  &#125;);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="comment">// Emits</span></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">const</span> emit = <span class="title function_">defineEmits</span>([<span class="string">&quot;incremented&quot;</span>]);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="comment">// Reactive state</span></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">const</span> count = <span class="title function_">ref</span>(props.<span class="property">initialCount</span>);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="comment">// Computed property</span></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">const</span> doubleCount = <span class="title function_">computed</span>(<span class="function">() =&gt;</span> count.<span class="property">value</span> * <span class="number">2</span>);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="comment">// Method</span></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">function</span> <span class="title function_">increment</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    count.<span class="property">value</span>++;</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">emit</span>(<span class="string">&quot;incremented&quot;</span>, count.<span class="property">value</span>);</span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="comment">// Lifecycle hook</span></span></span><br><span class="line"><span class="language-javascript">  <span class="title function_">onMounted</span>(<span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(</span></span><br><span class="line"><span class="language-javascript">      <span class="string">`Component with name &quot;<span class="subst">$&#123;props.name&#125;</span>&quot; is mounted. Initial count: <span class="subst">$&#123;count.value&#125;</span>`</span></span></span><br><span class="line"><span class="language-javascript">    );</span></span><br><span class="line"><span class="language-javascript">  &#125;);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="comment">// Expose to parent (e.g., for template refs)</span></span></span><br><span class="line"><span class="language-javascript">  <span class="title function_">defineExpose</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">    increment,</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">currentCount</span>: count,</span></span><br><span class="line"><span class="language-javascript">  &#125;);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="comment">// Top-level await (example)</span></span></span><br><span class="line"><span class="language-javascript">  <span class="comment">// const data = await fetchSomeData();</span></span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>Hello, &#123;&#123; props.name &#125;&#125;!<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>Count: &#123;&#123; count &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>Double Count: &#123;&#123; doubleCount &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;increment&quot;</span>&gt;</span>Increment<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">MyComponent</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="二、组件-Components"><a href="#二、组件-Components" class="headerlink" title="二、组件 (Components)"></a>二、组件 (Components)</h3><p>组件是 Vue 应用的核心构建块，允许将 UI 划分为独立且可复用的部分。</p>
<h4 id="1-Props"><a href="#1-Props" class="headerlink" title="1. Props"></a>1. Props</h4><p>Props 是父组件向子组件传递数据的方式。</p>
<ul>
<li><p><strong>声明 Props</strong>:</p>
<ul>
<li><strong>Options API</strong>: 使用 <code>props</code> 选项 (数组或对象形式)。</li>
<li><strong>Composition API (<code>&lt;script setup&gt;</code>)</strong>: 使用 <code>defineProps</code> 宏。</li>
<li><strong>Composition API (普通 <code>setup</code> 函数)</strong>: <code>props</code> 作为第一个参数传入 <code>setup</code> 函数。</li>
</ul>
</li>
<li><p><strong>Prop 校验</strong>: 可以为 prop 指定类型、是否必需、默认值以及自定义校验函数。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// &lt;script setup&gt;</span></span><br><span class="line"><span class="title function_">defineProps</span>(&#123;</span><br><span class="line">  <span class="comment">// 基础类型检查</span></span><br><span class="line">  <span class="attr">name</span>: <span class="title class_">String</span>,</span><br><span class="line">  <span class="comment">// 多个可能的类型</span></span><br><span class="line">  <span class="attr">age</span>: [<span class="title class_">String</span>, <span class="title class_">Number</span>],</span><br><span class="line">  <span class="comment">// 必填的字符串</span></span><br><span class="line">  <span class="attr">message</span>: &#123;</span><br><span class="line">    <span class="attr">type</span>: <span class="title class_">String</span>,</span><br><span class="line">    <span class="attr">required</span>: <span class="literal">true</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// 带默认值的数字</span></span><br><span class="line">  <span class="attr">count</span>: &#123;</span><br><span class="line">    <span class="attr">type</span>: <span class="title class_">Number</span>,</span><br><span class="line">    <span class="attr">default</span>: <span class="number">0</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// 带默认值的对象或数组 (工厂函数)</span></span><br><span class="line">  <span class="attr">myObject</span>: &#123;</span><br><span class="line">    <span class="attr">type</span>: <span class="title class_">Object</span>,</span><br><span class="line">    <span class="attr">default</span>: <span class="function">() =&gt;</span> (&#123;&#125;), <span class="comment">// 必须是工厂函数</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// 自定义验证函数</span></span><br><span class="line">  <span class="attr">customProp</span>: &#123;</span><br><span class="line">    <span class="attr">validator</span>: <span class="function">(<span class="params">value</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="comment">// 这个值必须匹配下列字符串中的一个</span></span><br><span class="line">      <span class="keyword">return</span> [<span class="string">&quot;success&quot;</span>, <span class="string">&quot;warning&quot;</span>, <span class="string">&quot;danger&quot;</span>].<span class="title function_">includes</span>(value);</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// 带默认值的函数</span></span><br><span class="line">  <span class="attr">onSomething</span>: &#123;</span><br><span class="line">    <span class="attr">type</span>: <span class="title class_">Function</span>,</span><br><span class="line">    <span class="attr">default</span>: <span class="function">() =&gt;</span> &#123;&#125;, <span class="comment">// 工厂函数返回函数本身</span></span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>单向数据流</strong>: 父组件的 prop 更新会向下流动到子组件，但子组件不应该直接修改 prop。如果需要修改，应该 <code>emit</code> 一个事件通知父组件进行更改。</p>
</li>
</ul>
<h4 id="2-Events-事件"><a href="#2-Events-事件" class="headerlink" title="2. Events (事件)"></a>2. Events (事件)</h4><p>子组件通过触发事件 (emit events) 与父组件通信。</p>
<ul>
<li><p><strong>触发事件</strong>:</p>
<ul>
<li><strong>Options API</strong>: <code>this.$emit(&#39;eventName&#39;, ...args)</code></li>
<li><strong>Composition API (<code>&lt;script setup&gt;</code>)</strong>: <code>emit(&#39;eventName&#39;, ...args)</code> (通过 <code>defineEmits</code> 获取 <code>emit</code> 函数)</li>
<li><strong>Composition API (普通 <code>setup</code> 函数)</strong>: <code>context.emit(&#39;eventName&#39;, ...args)</code></li>
</ul>
</li>
<li><p><strong>监听事件</strong>: 在父组件中，使用 <code>v-on</code> (简写 <code>@</code>) 指令监听子组件触发的事件。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ChildComponent</span> @<span class="attr">custom-event</span>=<span class="string">&quot;handleCustomEvent&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Parent.vue</span></span><br><span class="line"><span class="attr">methods</span>: &#123; <span class="comment">// 或 setup 中定义</span></span><br><span class="line">  <span class="title function_">handleCustomEvent</span>(<span class="params">payload</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Custom event received with payload:&#x27;</span>, payload);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="3-Slots-插槽"><a href="#3-Slots-插槽" class="headerlink" title="3. Slots (插槽)"></a>3. Slots (插槽)</h4><p>插槽允许父组件向子组件模板中注入内容。这使得组件更加灵活和可复用。</p>
<ul>
<li><p><strong>默认插槽</strong>: 子组件中使用 <code>&lt;slot&gt;&lt;/slot&gt;</code> 标签作为占位符。父组件中放在子组件标签内的所有内容都会被插入到这个插槽。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">header</span>&gt;</span>Header<span class="tag">&lt;/<span class="name">header</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">main</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">slot</span>&gt;</span><span class="tag">&lt;/<span class="name">slot</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">main</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">footer</span>&gt;</span>Footer<span class="tag">&lt;/<span class="name">footer</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ChildComponent</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span>&gt;</span>This content will go into the default slot.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ChildComponent</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>具名插槽 (Named Slots)</strong>: 子组件可以使用 <code>name</code> 属性定义多个插槽。父组件使用 <code>v-slot</code> 指令 (简写 <code>#</code>) 并指定插槽名称来分发内容。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;card&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">header</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">slot</span> <span class="attr">name</span>=<span class="string">&quot;header&quot;</span>&gt;</span>Default Header<span class="tag">&lt;/<span class="name">slot</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">header</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">main</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">slot</span>&gt;</span><span class="tag">&lt;/<span class="name">slot</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">main</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">footer</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">slot</span> <span class="attr">name</span>=<span class="string">&quot;footer&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">slot</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">footer</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">CardComponent</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">template</span> <span class="attr">v-slot:header</span>&gt;</span> <span class="tag">&lt;<span class="name">h1</span>&gt;</span>My Card Title<span class="tag">&lt;/<span class="name">h1</span>&gt;</span> <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span>&gt;</span>This is the main content of the card.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">template</span> #<span class="attr">footer</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span>&gt;</span>Learn More<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">CardComponent</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>作用域插槽 (Scoped Slots)</strong>: 允许子组件将数据传递给父组件的插槽内容。父组件通过 <code>v-slot</code> 接收这些数据。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span> <span class="attr">v_for</span>=<span class="string">&quot;item in items&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;item.id&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">slot</span> <span class="attr">name</span>=<span class="string">&quot;item&quot;</span> <span class="attr">:itemData</span>=<span class="string">&quot;item&quot;</span> <span class="attr">:index</span>=<span class="string">&quot;currentIndex&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">slot</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="title function_">defineProps</span>([<span class="string">&quot;items&quot;</span>]);</span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">const</span> currentIndex = <span class="number">0</span>; <span class="comment">// 示例，可以是循环的 index</span></span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ItemList</span> <span class="attr">:items</span>=<span class="string">&quot;myList&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">template</span> #<span class="attr">item</span>=<span class="string">&quot;slotProps&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">span</span>&gt;</span>ID: &#123;&#123; slotProps.itemData.id &#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">span</span>&gt;</span>Name: &#123;&#123; slotProps.itemData.name &#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">span</span>&gt;</span>Index: &#123;&#123; slotProps.index &#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ItemList</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>在 <code>&lt;script setup&gt;</code> 中，如果只有一个默认插槽且需要作用域，可以直接在组件标签上使用 <code>v-slot</code>：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ItemList</span> <span class="attr">:items</span>=<span class="string">&quot;myList&quot;</span> <span class="attr">v-slot</span>=<span class="string">&quot;slotProps&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span>&#123;&#123; slotProps.itemData.name &#125;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ItemList</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="4-Provide-Inject"><a href="#4-Provide-Inject" class="headerlink" title="4. Provide &#x2F; Inject"></a>4. Provide &#x2F; Inject</h4><p><code>provide</code> 和 <code>inject</code> 用于解决组件层级较深时，数据传递（”prop drilling”）的问题。一个祖先组件可以作为依赖提供者 (<code>provide</code>)，其所有后代组件都可以注入 (<code>inject</code>) 它所提供的依赖，无论层级多深。</p>
<ul>
<li><p><strong><code>provide</code></strong>:</p>
<ul>
<li><strong>Options API</strong>: 使用 <code>provide</code> 选项 (函数形式可以访问 <code>this</code>)。</li>
<li><strong>Composition API</strong>: 使用 <code>provide</code> 函数。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// AncestorComponent.vue (Composition API)</span></span><br><span class="line"><span class="keyword">import</span> &#123; provide, ref &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="title function_">setup</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> theme = <span class="title function_">ref</span>(<span class="string">&quot;dark&quot;</span>);</span><br><span class="line">    <span class="title function_">provide</span>(<span class="string">&quot;theme&quot;</span>, theme); <span class="comment">// 可以提供响应式数据</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> <span class="title function_">changeTheme</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">      theme.<span class="property">value</span> = theme.<span class="property">value</span> === <span class="string">&quot;dark&quot;</span> ? <span class="string">&quot;light&quot;</span> : <span class="string">&quot;dark&quot;</span>;</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="title function_">provide</span>(<span class="string">&quot;changeTheme&quot;</span>, changeTheme); <span class="comment">// 也可以提供方法</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> &#123; theme, changeTheme &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong><code>inject</code></strong>:</p>
<ul>
<li><strong>Options API</strong>: 使用 <code>inject</code> 选项 (数组或对象形式)。</li>
<li><strong>Composition API</strong>: 使用 <code>inject</code> 函数。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// DescendantComponent.vue (Composition API)</span></span><br><span class="line"><span class="keyword">import</span> &#123; inject &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="title function_">setup</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> theme = <span class="title function_">inject</span>(<span class="string">&quot;theme&quot;</span>); <span class="comment">// 注入 &#x27;theme&#x27;</span></span><br><span class="line">    <span class="keyword">const</span> changeTheme = <span class="title function_">inject</span>(<span class="string">&quot;changeTheme&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 可以提供默认值</span></span><br><span class="line">    <span class="keyword">const</span> user = <span class="title function_">inject</span>(<span class="string">&quot;user&quot;</span>, <span class="function">() =&gt;</span> (&#123; <span class="attr">name</span>: <span class="string">&quot;Guest&quot;</span> &#125;)); <span class="comment">// 工厂函数作为默认值</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> &#123; theme, user, changeTheme &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p><code>provide</code> 和 <code>inject</code> 绑定不是响应式的，除非传递的是一个响应式对象 (如 <code>ref</code> 或 <code>reactive</code> 对象)。如果希望注入的数据能够响应提供者的变化，提供者需要 <code>provide</code> 一个 <code>ref</code> 或 <code>reactive</code> 对象。</p>
</li>
</ul>
<h4 id="5-动态组件"><a href="#5-动态组件" class="headerlink" title="5. 动态组件 (&lt;component :is=&quot;...&quot;&gt;)"></a>5. 动态组件 (<code>&lt;component :is=&quot;...&quot;&gt;</code>)</h4><p>允许根据一个变量的值动态地切换要渲染的组件。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;currentComponent = &#x27;ComponentA&#x27;&quot;</span>&gt;</span>Load A<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;currentComponent = &#x27;ComponentB&#x27;&quot;</span>&gt;</span>Load B<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">keep-alive</span>&gt;</span> <span class="tag">&lt;<span class="name">component</span> <span class="attr">:is</span>=<span class="string">&quot;activeComponent&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">component</span>&gt;</span> <span class="tag">&lt;/<span class="name">keep-alive</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">import</span> &#123; ref, shallowRef, markRaw &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">import</span> <span class="title class_">ComponentA</span> <span class="keyword">from</span> <span class="string">&quot;./ComponentA.vue&quot;</span>;</span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">import</span> <span class="title class_">ComponentB</span> <span class="keyword">from</span> <span class="string">&quot;./ComponentB.vue&quot;</span>;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">const</span> currentComponent = <span class="title function_">ref</span>(<span class="string">&quot;ComponentA&quot;</span>); <span class="comment">// 存储组件名称字符串</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="comment">// 或者直接存储组件对象 (推荐使用 shallowRef 和 markRaw 优化性能)</span></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">const</span> componentMap = &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="title class_">ComponentA</span>: <span class="title function_">markRaw</span>(<span class="title class_">ComponentA</span>),</span></span><br><span class="line"><span class="language-javascript">    <span class="title class_">ComponentB</span>: <span class="title function_">markRaw</span>(<span class="title class_">ComponentB</span>),</span></span><br><span class="line"><span class="language-javascript">  &#125;;</span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">const</span> activeComponent = <span class="title function_">shallowRef</span>(componentMap.<span class="property">ComponentA</span>);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">function</span> <span class="title function_">switchComponent</span>(<span class="params">compName</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    activeComponent.<span class="property">value</span> = componentMap[compName];</span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="6-异步组件-defineAsyncComponent"><a href="#6-异步组件-defineAsyncComponent" class="headerlink" title="6. 异步组件 (defineAsyncComponent)"></a>6. 异步组件 (<code>defineAsyncComponent</code>)</h4><p>允许按需加载组件，只有在需要渲染时才会下载和解析组件代码。这对于优化应用的初始加载时间非常有用。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; defineAsyncComponent &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">AsyncComponent</span> = <span class="title function_">defineAsyncComponent</span>(<span class="function">() =&gt;</span></span><br><span class="line">  <span class="keyword">import</span>(<span class="string">&quot;./MyAsyncComponent.vue&quot;</span>)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 带选项的异步组件</span></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">AsyncComponentWithOptions</span> = <span class="title function_">defineAsyncComponent</span>(&#123;</span><br><span class="line">  <span class="comment">// 加载函数</span></span><br><span class="line">  <span class="attr">loader</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&quot;./AnotherAsyncComponent.vue&quot;</span>),</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 加载异步组件时使用的组件</span></span><br><span class="line">  <span class="attr">loadingComponent</span>: <span class="title class_">LoadingComponent</span>, <span class="comment">// 一个表示加载中的组件</span></span><br><span class="line">  <span class="comment">// 展示加载组件前的延迟时间，默认为 200ms</span></span><br><span class="line">  <span class="attr">delay</span>: <span class="number">200</span>,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 加载失败后展示的组件</span></span><br><span class="line">  <span class="attr">errorComponent</span>: <span class="title class_">ErrorComponent</span>,</span><br><span class="line">  <span class="comment">// 如果提供了一个 timeout 时间限制，并超时了，</span></span><br><span class="line">  <span class="comment">// 也会显示这里配置的报错组件。默认为 Infinity</span></span><br><span class="line">  <span class="attr">timeout</span>: <span class="number">3000</span>,</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="attr">components</span>: &#123;</span><br><span class="line">    <span class="title class_">AsyncComponent</span>,</span><br><span class="line">    <span class="title class_">AsyncComponentWithOptions</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h3 id="三、模板语法-Template-Syntax"><a href="#三、模板语法-Template-Syntax" class="headerlink" title="三、模板语法 (Template Syntax)"></a>三、模板语法 (Template Syntax)</h3><p>Vue 使用一种基于 HTML 的模板语法，允许开发者声明式地将 DOM 绑定到底层组件实例的数据。</p>
<h4 id="1-插值-Interpolation"><a href="#1-插值-Interpolation" class="headerlink" title="1. 插值 (Interpolation)"></a>1. 插值 (Interpolation)</h4><ul>
<li><p><strong>文本</strong>: 使用双大括号 (Mustache 语法) <code>&#123;&#123; &#125;&#125;</code>。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">span</span>&gt;</span>Message: &#123;&#123; msg &#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>原始 HTML</strong>: 使用 <code>v-html</code> 指令。<strong>注意：动态渲染任意 HTML 是非常危险的，因为它很容易导致 XSS 攻击。只在内容安全可靠的情况下使用 <code>v-html</code>，并且永远不要用它来渲染用户提交的内容。</strong></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">v-html</span>=<span class="string">&quot;rawHtml&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>Attribute</strong>: 不能在 HTML attribute 中使用 <code>&#123;&#123; &#125;&#125;</code>。应使用 <code>v-bind</code> 指令。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">v-bind:id</span>=<span class="string">&quot;dynamicId&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">:id</span>=<span class="string">&quot;dynamicId&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="2-指令-Directives"><a href="#2-指令-Directives" class="headerlink" title="2. 指令 (Directives)"></a>2. 指令 (Directives)</h4><p>指令是带有 <code>v-</code> 前缀的特殊 attribute。指令 attribute 的值预期是单个 JavaScript 表达式 (除了 <code>v-for</code>, <code>v-on</code> 和 <code>v-slot</code>，它们有特殊的语法)。</p>
<ul>
<li><p><strong><code>v-text</code></strong>: 更新元素的 <code>textContent</code>。等价于 <code>&#123;&#123; &#125;&#125;</code>。</p>
</li>
<li><p><strong><code>v-html</code></strong>: 更新元素的 <code>innerHTML</code> (如上所述，注意安全风险)。</p>
</li>
<li><p><strong><code>v-show</code></strong>: 根据表达式的真假值，切换元素的 CSS <code>display</code> 属性。元素始终会被渲染并保留在 DOM 中。</p>
</li>
<li><p><strong><code>v-if</code>, <code>v-else-if</code>, <code>v-else</code></strong>: 条件渲染。根据表达式的值，惰性地创建或销毁元素&#x2F;组件。</p>
<ul>
<li><code>v-if</code> 是“真正”的条件渲染，因为它会确保在切换过程中条件块内的事件监听器和子组件适当地被销毁和重建。</li>
<li><code>v-if</code> 也是惰性的：如果在初始渲染时条件为假，则什么也不做——直到条件第一次变为真时，才会开始渲染条件块。</li>
<li>可以与 <code>&lt;template&gt;</code> 元素一起使用，以渲染包含多个元素的条件块。</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">v-if</span>=<span class="string">&quot;type === &#x27;A&#x27;&quot;</span>&gt;</span>A<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">v-else-if</span>=<span class="string">&quot;type === &#x27;B&#x27;&quot;</span>&gt;</span>B<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">v-else</span>&gt;</span>Not A/B<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span> <span class="attr">v-if</span>=<span class="string">&quot;isVisible&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">h1</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span>&gt;</span>Paragraph 1<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong><code>v-for</code></strong>: 列表渲染。基于源数据多次渲染元素或模板块。</p>
<ul>
<li>可以遍历数组和对象。</li>
<li>需要一个特殊的 <code>key</code> attribute，以便 Vue 可以跟踪每个节点的身份，从而重用和重新排序现有元素。<code>key</code> 应该是唯一的字符串或数字。</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">&quot;(item, index) in items&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;item.id&quot;</span>&gt;</span></span><br><span class="line">    &#123;&#123; index &#125;&#125; - &#123;&#123; item.name &#125;&#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">&quot;(value, key, index) in myObject&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;key&quot;</span>&gt;</span></span><br><span class="line">    &#123;&#123; index &#125;&#125;. &#123;&#123; key &#125;&#125;: &#123;&#123; value &#125;&#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">span</span> <span class="attr">v-for</span>=<span class="string">&quot;n in 10&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;n&quot;</span>&gt;</span>&#123;&#123; n &#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">template</span> <span class="attr">v-for</span>=<span class="string">&quot;item in items&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;item.id&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>&#123;&#123; item.name &#125;&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;divider&quot;</span> <span class="attr">role</span>=<span class="string">&quot;presentation&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong><code>v-on</code> (简写 <code>@</code>)</strong>: 事件监听。用于监听 DOM 事件，并在触发时运行一些 JavaScript 代码。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">v-on:click</span>=<span class="string">&quot;doSomething&quot;</span>&gt;</span>Click me<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;doSomething&quot;</span>&gt;</span>Click me<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;count++&quot;</span>&gt;</span>Add 1<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> @<span class="attr">submit.prevent</span>=<span class="string">&quot;onSubmit&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> @<span class="attr">click.stop</span>=<span class="string">&quot;doThis&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> @<span class="attr">click.self</span>=<span class="string">&quot;doThat&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> @<span class="attr">keyup.enter</span>=<span class="string">&quot;submit&quot;</span> /&gt;</span> ``` 常用的事件修饰符：`.stop`, `.prevent`,</span><br><span class="line">`.capture`, `.self`, `.once`, `.passive`。 常用的按键修饰符：`.enter`, `.tab`,</span><br><span class="line">`.delete` (捕获“删除”和“退格”键), `.esc`, `.space`, `.up`, `.down`, `.left`,</span><br><span class="line">`.right`。也可以使用系统修饰键：`.ctrl`, `.alt`, `.shift`, `.meta`。</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong><code>v-bind</code> (简写 <code>:</code>)</strong>: 动态绑定 Attribute。用于动态地绑定一个或多个 attribute，或一个组件 prop 到表达式。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">:src</span>=<span class="string">&quot;imageSrc&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">:class</span>=<span class="string">&quot;&#123; active: isActive, &#x27;text-danger&#x27;: hasError &#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">:style</span>=<span class="string">&quot;&#123; color: activeColor, fontSize: fontSize + &#x27;px&#x27; &#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">v-bind</span>=<span class="string">&quot;objectOfAttrs&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>对于 <code>class</code> 和 <code>style</code>，<code>v-bind</code> 支持数组和对象语法。</p>
</li>
<li><p><strong><code>v-model</code></strong>: 双向数据绑定。通常用在表单输入元素 (<code>&lt;input&gt;</code>, <code>&lt;select&gt;</code>, <code>&lt;textarea&gt;</code>) 和自定义组件上。</p>
<ul>
<li>它会根据控件类型自动选取正确的方法来更新元素。</li>
<li>本质上是语法糖，背后是 <code>:value</code> (或特定元素的特定 prop) 和 <code>@input</code> (或特定元素的特定 event)。</li>
<li>修饰符：<ul>
<li><code>.lazy</code>: 取代 <code>input</code> 监听 <code>change</code> 事件。</li>
<li><code>.number</code>: 将输入值自动转换为数字。</li>
<li><code>.trim</code>: 自动过滤用户输入的首尾空白字符。</li>
</ul>
</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">v-model</span>=<span class="string">&quot;message&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;edit me&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>Message is: &#123;&#123; message &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">id</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;checked&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;checkbox&quot;</span>&gt;</span>&#123;&#123; checked &#125;&#125;<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">v-model</span>=<span class="string">&quot;selected&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">option</span> <span class="attr">disabled</span> <span class="attr">value</span>=<span class="string">&quot;&quot;</span>&gt;</span>Please select one<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">option</span>&gt;</span>A<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">option</span>&gt;</span>B<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong><code>v-slot</code> (简写 <code>#</code>)</strong>: 用于具名插槽和作用域插槽 (见组件插槽部分)。</p>
</li>
<li><p><strong><code>v-pre</code></strong>: 跳过该元素及其所有子元素的编译。可以用来显示原始 Mustache 标签。</p>
</li>
<li><p><strong><code>v-cloak</code></strong>: 这个指令保持在元素上直到关联组件实例结束编译。和 CSS 规则如 <code>[v-cloak] &#123; display: none &#125;</code> 一起用时，它可以隐藏未编译的 Mustache 标签直到组件实例准备完毕。</p>
</li>
<li><p><strong><code>v-once</code></strong>: 只渲染元素和组件一次。随后的重新渲染，元素&#x2F;组件及其所有的子节点将被视为静态内容并跳过。这可以用于优化更新性能。</p>
</li>
</ul>
<h4 id="3-自定义指令-Custom-Directives"><a href="#3-自定义指令-Custom-Directives" class="headerlink" title="3. 自定义指令 (Custom Directives)"></a>3. 自定义指令 (Custom Directives)</h4><p>除了核心指令，Vue 也允许注册自定义指令。自定义指令提供了一种机制，用于将底层的 DOM 操作封装起来。</p>
<ul>
<li><p><strong>注册</strong>:</p>
<ul>
<li><strong>全局注册</strong>: <code>app.directive(&#39;my-directive&#39;, &#123; /* ...hooks... */ &#125;)</code></li>
<li><strong>局部注册 (组件内)</strong>: 使用 <code>directives</code> 选项 (Options API) 或在 <code>&lt;script setup&gt;</code> 中以 <code>vNameOfDirective</code> 的形式命名函数或对象。</li>
</ul>
</li>
<li><p><strong>钩子函数</strong>: 自定义指令可以定义以下钩子函数，它们会在指令绑定到元素的不同阶段被调用：</p>
<ul>
<li><code>created(el, binding, vnode, prevVnode)</code>: 在绑定元素的 attribute 或事件监听器被应用之前调用。</li>
<li><code>beforeMount(el, binding, vnode, prevVnode)</code>: 当指令第一次绑定到元素并且在挂载父组件之前调用。</li>
<li><code>mounted(el, binding, vnode, prevVnode)</code>: 在绑定元素的父组件被挂载后调用。</li>
<li><code>beforeUpdate(el, binding, vnode, prevVnode)</code>: 在更新包含组件的 VNode 之前调用。</li>
<li><code>updated(el, binding, vnode, prevVnode)</code>: 在包含组件的 VNode 及其子组件的 VNode 更新后调用。</li>
<li><code>beforeUnmount(el, binding, vnode, prevVnode)</code>: 在卸载绑定元素的父组件之前调用。</li>
<li><code>unmounted(el, binding, vnode, prevVnode)</code>: 当指令与元素解除绑定且父组件已卸载时调用。</li>
</ul>
<p>钩子函数的参数：</p>
<ul>
<li><code>el</code>: 指令所绑定的元素，可以直接操作 DOM。</li>
<li><code>binding</code>: 一个对象，包含以下属性：<ul>
<li><code>value</code>: 指令的绑定值，例如：<code>v-my-directive=&quot;1 + 1&quot;</code> 中，<code>value</code> 的值是 <code>2</code>。</li>
<li><code>oldValue</code>: 之前的值，仅在 <code>beforeUpdate</code> 和 <code>updated</code> 中可用。</li>
<li><code>arg</code>: 传递给指令的参数 (如果存在)。例如 <code>v-my-directive:foo</code>，<code>arg</code> 的值是 <code>&quot;foo&quot;</code>。</li>
<li><code>modifiers</code>: 一个包含修饰符的对象 (如果存在)。例如 <code>v-my-directive.foo.bar</code>，<code>modifiers</code> 的值是 <code>&#123; foo: true, bar: true &#125;</code>。</li>
<li><code>instance</code>: 使用该指令的组件实例。</li>
<li><code>dir</code>: 指令的定义对象。</li>
</ul>
</li>
<li><code>vnode</code>: 代表绑定元素的底层 VNode。</li>
<li><code>prevVnode</code>: 代表之前的渲染中指令所绑定元素的 VNode。仅在 <code>beforeUpdate</code> 和 <code>updated</code> 钩子中可用。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// &lt;script setup&gt; - 局部自定义指令</span></span><br><span class="line"><span class="comment">// 指令会自动注册，名称为 vFocus (驼峰命名会自动转换为 kebab-case v-focus)</span></span><br><span class="line"><span class="keyword">const</span> vFocus = &#123;</span><br><span class="line">  <span class="attr">mounted</span>: <span class="function">(<span class="params">el</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// 在元素挂载后，自动聚焦它</span></span><br><span class="line">    el.<span class="title function_">focus</span>();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">v-focus</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<p>如果自定义指令只需要 <code>mounted</code> 和 <code>updated</code> 行为且行为相同，并且不需要访问 <code>binding</code> 的其他属性，可以提供一个函数简写：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">app.<span class="title function_">directive</span>(<span class="string">&quot;color&quot;</span>, <span class="function">(<span class="params">el, binding</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// 这会在 `mounted` 和 `updated` 时都调用</span></span><br><span class="line">  el.<span class="property">style</span>.<span class="property">color</span> = binding.<span class="property">value</span>;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="四、路由-Routing-with-Vue-Router"><a href="#四、路由-Routing-with-Vue-Router" class="headerlink" title="四、路由 (Routing with Vue Router)"></a>四、路由 (Routing with Vue Router)</h3><p>Vue Router 是 Vue.js 的官方路由管理器。它与 Vue.js 核心深度集成，让构建单页面应用 (SPA) 变得易如反掌。</p>
<h4 id="1-安装和基本配置"><a href="#1-安装和基本配置" class="headerlink" title="1. 安装和基本配置"></a>1. 安装和基本配置</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install vue-router@4 <span class="comment"># Vue 3 使用 Vue Router 4.x</span></span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// src/router/index.js</span></span><br><span class="line"><span class="keyword">import</span> &#123;</span><br><span class="line">  createRouter,</span><br><span class="line">  createWebHistory,</span><br><span class="line">  createWebHashHistory,</span><br><span class="line">&#125; <span class="keyword">from</span> <span class="string">&quot;vue-router&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">HomeView</span> <span class="keyword">from</span> <span class="string">&quot;../views/HomeView.vue&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">AboutView</span> <span class="keyword">from</span> <span class="string">&quot;../views/AboutView.vue&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> routes = [</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&quot;/&quot;</span>,</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&quot;home&quot;</span>,</span><br><span class="line">    <span class="attr">component</span>: <span class="title class_">HomeView</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&quot;/about&quot;</span>,</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&quot;about&quot;</span>,</span><br><span class="line">    <span class="attr">component</span>: <span class="title class_">AboutView</span>,</span><br><span class="line">    <span class="comment">// 也可以使用路由懒加载:</span></span><br><span class="line">    <span class="comment">// component: () =&gt; import(/* webpackChunkName: &quot;about&quot; */ &#x27;../views/AboutView.vue&#x27;)</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// 动态路由匹配</span></span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&quot;/user/:id&quot;</span>, <span class="comment">// :id 是动态段</span></span><br><span class="line">    <span class="attr">name</span>: <span class="string">&quot;user&quot;</span>,</span><br><span class="line">    <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&quot;../views/UserProfile.vue&quot;</span>),</span><br><span class="line">    <span class="attr">props</span>: <span class="literal">true</span>, <span class="comment">// 将路由参数作为 props 传递给组件</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// 编程式导航</span></span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&quot;/posts&quot;</span>,</span><br><span class="line">    <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&quot;../views/PostsView.vue&quot;</span>),</span><br><span class="line">    <span class="attr">children</span>: [</span><br><span class="line">      <span class="comment">// 嵌套路由</span></span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">path</span>: <span class="string">&quot;new&quot;</span>, <span class="comment">//  /posts/new</span></span><br><span class="line">        <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&quot;../views/NewPost.vue&quot;</span>),</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">path</span>: <span class="string">&quot;:postId&quot;</span>, <span class="comment">// /posts/123</span></span><br><span class="line">        <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&quot;../views/PostDetail.vue&quot;</span>),</span><br><span class="line">        <span class="attr">props</span>: <span class="literal">true</span>,</span><br><span class="line">      &#125;,</span><br><span class="line">    ],</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// 捕获所有路由或 404 Not found</span></span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&quot;/:catchAll(.*)*&quot;</span>, <span class="comment">// Vue Router 4.x 推荐的捕获所有写法</span></span><br><span class="line">    <span class="attr">name</span>: <span class="string">&quot;NotFound&quot;</span>,</span><br><span class="line">    <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&quot;../views/NotFound.vue&quot;</span>),</span><br><span class="line">  &#125;,</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> router = <span class="title function_">createRouter</span>(&#123;</span><br><span class="line">  <span class="attr">history</span>: <span class="title function_">createWebHistory</span>(process.<span class="property">env</span>.<span class="property">BASE_URL</span>), <span class="comment">// HTML5 History 模式</span></span><br><span class="line">  <span class="comment">// history: createWebHashHistory(process.env.BASE_URL), // Hash 模式</span></span><br><span class="line">  routes,</span><br><span class="line">  <span class="title function_">scrollBehavior</span>(<span class="params">to, <span class="keyword">from</span>, savedPosition</span>) &#123;</span><br><span class="line">    <span class="comment">// 滚动行为</span></span><br><span class="line">    <span class="keyword">if</span> (savedPosition) &#123;</span><br><span class="line">      <span class="keyword">return</span> savedPosition;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> &#123; <span class="attr">top</span>: <span class="number">0</span>, <span class="attr">behavior</span>: <span class="string">&quot;smooth&quot;</span> &#125;;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> router;</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// src/main.js</span></span><br><span class="line"><span class="keyword">import</span> &#123; createApp &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">&quot;./App.vue&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">&quot;./router&quot;</span>; <span class="comment">// 导入路由</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">createApp</span>(<span class="title class_">App</span>);</span><br><span class="line">app.<span class="title function_">use</span>(router); <span class="comment">// 使用路由</span></span><br><span class="line">app.<span class="title function_">mount</span>(<span class="string">&quot;#app&quot;</span>);</span><br></pre></td></tr></table></figure>

<h4 id="2-路由组件"><a href="#2-路由组件" class="headerlink" title="2. 路由组件"></a>2. 路由组件</h4><ul>
<li><p><strong><code>&lt;router-link&gt;</code></strong>: 用于声明式导航。它会被渲染为一个 <code>&lt;a&gt;</code> 标签。</p>
<ul>
<li><code>to</code>: 目标路由的路径或命名的路由对象。</li>
<li><code>active-class</code>: 链接激活时应用的 CSS 类名 (默认为 <code>router-link-active</code>)。</li>
<li><code>exact-active-class</code>: 精确激活时应用的 CSS 类名 (默认为 <code>router-link-exact-active</code>)。</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">router-link</span> <span class="attr">to</span>=<span class="string">&quot;/&quot;</span>&gt;</span>Home<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">router-link</span> <span class="attr">:to</span>=<span class="string">&quot;&#123; name: &#x27;about&#x27; &#125;&quot;</span>&gt;</span>About<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">router-link</span> <span class="attr">:to</span>=<span class="string">&quot;&#123; name: &#x27;user&#x27;, params: &#123; id: 123 &#125;&#125;&quot;</span>&gt;</span>User 123<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong><code>&lt;router-view&gt;</code></strong>: 路由出口。路由匹配到的组件将在这里渲染。</p>
<ul>
<li>可以传递 <code>name</code> 属性用于命名视图 (用于一个路由匹配多个组件的情况)。</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">nav</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">router-link</span> <span class="attr">to</span>=<span class="string">&quot;/&quot;</span>&gt;</span>Home<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span> |</span><br><span class="line">    <span class="tag">&lt;<span class="name">router-link</span> <span class="attr">to</span>=<span class="string">&quot;/about&quot;</span>&gt;</span>About<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">nav</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">router-view</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="3-编程式导航"><a href="#3-编程式导航" class="headerlink" title="3. 编程式导航"></a>3. 编程式导航</h4><p>可以在 JavaScript 中通过 <code>router</code> 实例的方法进行导航。</p>
<ul>
<li><p>在 Composition API (<code>&lt;script setup&gt;</code> 或 <code>setup</code> 函数) 中:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useRouter &#125; <span class="keyword">from</span> <span class="string">&quot;vue-router&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> router = <span class="title function_">useRouter</span>();</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">goToHome</span>(<span class="params"></span>) &#123;</span><br><span class="line">  router.<span class="title function_">push</span>(<span class="string">&quot;/&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">goToAboutByName</span>(<span class="params"></span>) &#123;</span><br><span class="line">  router.<span class="title function_">push</span>(&#123; <span class="attr">name</span>: <span class="string">&quot;about&quot;</span> &#125;);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">replaceToUser</span>(<span class="params"></span>) &#123;</span><br><span class="line">  router.<span class="title function_">replace</span>(&#123; <span class="attr">name</span>: <span class="string">&quot;user&quot;</span>, <span class="attr">params</span>: &#123; <span class="attr">id</span>: <span class="string">&quot;456&quot;</span> &#125; &#125;); <span class="comment">// 替换当前历史记录</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">goBack</span>(<span class="params"></span>) &#123;</span><br><span class="line">  router.<span class="title function_">go</span>(-<span class="number">1</span>); <span class="comment">// 后退一步</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>在 Options API 中: <code>this.$router.push(&#39;/&#39;)</code></p>
</li>
</ul>
<h4 id="4-路由参数"><a href="#4-路由参数" class="headerlink" title="4. 路由参数"></a>4. 路由参数</h4><ul>
<li><p><strong>获取当前路由信息</strong>:</p>
<ul>
<li>Composition API: <code>import &#123; useRoute &#125; from &#39;vue-router&#39;; const route = useRoute(); console.log(route.params.id);</code></li>
<li>Options API: <code>this.$route.params.id</code></li>
<li><code>route</code> 对象包含路径、参数、查询参数、哈希等信息。</li>
</ul>
</li>
<li><p><strong>将参数作为 Props 传递</strong>: 在路由配置中设置 <code>props: true</code>，路由参数会自动作为 props 传递给组件。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 路由配置</span></span><br><span class="line"><span class="comment">// &#123; path: &#x27;/user/:id&#x27;, component: UserProfile, props: true &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// UserProfile.vue (&lt;script setup&gt;)</span></span><br><span class="line"><span class="keyword">const</span> props = <span class="title function_">defineProps</span>(&#123;</span><br><span class="line">  <span class="attr">id</span>: <span class="title class_">String</span>, <span class="comment">// 或 Number，取决于你的需求和转换</span></span><br><span class="line">&#125;);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(props.<span class="property">id</span>);</span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="5-导航守卫-Navigation-Guards"><a href="#5-导航守卫-Navigation-Guards" class="headerlink" title="5. 导航守卫 (Navigation Guards)"></a>5. 导航守卫 (Navigation Guards)</h4><p>Vue Router 提供了导航守卫，主要用来通过跳转或取消的方式守卫导航。有多种机会植入路由导航过程中：全局的、单个路由独享的、或者组件级的。</p>
<ul>
<li><p><strong>全局前置守卫</strong>: <code>router.beforeEach((to, from, next) =&gt; &#123; ... &#125;)</code></p>
<ul>
<li><code>to</code>: 即将要进入的目标路由对象。</li>
<li><code>from</code>: 当前导航正要离开的路由对象。</li>
<li><code>next</code>: 函数，必须调用该方法来 resolve 这个钩子。<ul>
<li><code>next()</code>: 进行管道中的下一个钩子。</li>
<li><code>next(false)</code>: 中断当前的导航。</li>
<li><code>next(&#39;/&#39;)</code> 或 <code>next(&#123; path: &#39;/&#39; &#125;)</code>: 跳转到一个不同的地址。</li>
<li><code>next(error)</code>: (2.4.0+) 如果传入 <code>next</code> 的参数是一个 <code>Error</code> 实例，则导航会被终止且该错误会被传递给 <code>router.onError()</code> 注册过的回调。</li>
</ul>
</li>
</ul>
</li>
<li><p><strong>全局解析守卫</strong>: <code>router.beforeResolve((to, from, next) =&gt; &#123; ... &#125;)</code> (在所有组件内守卫和异步路由组件被解析之后调用)。</p>
</li>
<li><p><strong>全局后置钩子</strong>: <code>router.afterEach((to, from, failure) =&gt; &#123; ... &#125;)</code> (没有 <code>next</code> 函数，也不会改变导航本身)。</p>
</li>
<li><p><strong>路由独享守卫</strong>: 在路由配置中直接定义 <code>beforeEnter</code>:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> routes = [</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&quot;/admin&quot;</span>,</span><br><span class="line">    <span class="attr">component</span>: <span class="title class_">AdminPanel</span>,</span><br><span class="line">    <span class="attr">beforeEnter</span>: <span class="function">(<span class="params">to, <span class="keyword">from</span>, next</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="comment">// ...</span></span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">];</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>组件内守卫</strong> (在组件选项或 Composition API 中定义):</p>
<ul>
<li><code>beforeRouteEnter(to, from, next)</code>: 在渲染该组件的对应路由被验证前调用。<strong>不能</strong>获取组件实例 <code>this</code>，因为当守卫执行前，组件实例还没被创建。但是，你可以通过传一个回调给 <code>next</code> 来访问组件实例。</li>
<li><code>beforeRouteUpdate(to, from, next)</code>: 在当前路由改变，但是该组件被复用时调用 (例如，对于一个带有动态参数的路径 <code>/users/:id</code>，在 <code>/users/1</code> 和 <code>/users/2</code> 之间跳转的时候)。可以访问组件实例 <code>this</code>。</li>
<li><code>beforeRouteLeave(to, from, next)</code>: 导航离开该组件的对应路由时调用。可以访问组件实例 <code>this</code>。通常用于提示用户保存未保存的修改。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Options API</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="title function_">beforeRouteEnter</span>(<span class="params">to, <span class="keyword">from</span>, next</span>) &#123;</span><br><span class="line">    <span class="title function_">next</span>(<span class="function">(<span class="params">vm</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="comment">// 通过 `vm` 访问组件实例</span></span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">beforeRouteUpdate</span>(<span class="params">to, <span class="keyword">from</span>, next</span>) &#123;</span><br><span class="line">    <span class="comment">// this 可用</span></span><br><span class="line">    <span class="title function_">next</span>();</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">beforeRouteLeave</span>(<span class="params">to, <span class="keyword">from</span>, next</span>) &#123;</span><br><span class="line">    <span class="comment">// this 可用</span></span><br><span class="line">    <span class="keyword">const</span> answer = <span class="variable language_">window</span>.<span class="title function_">confirm</span>(</span><br><span class="line">      <span class="string">&quot;Do you really want to leave? You have unsaved changes!&quot;</span></span><br><span class="line">    );</span><br><span class="line">    <span class="keyword">if</span> (answer) &#123;</span><br><span class="line">      <span class="title function_">next</span>();</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="title function_">next</span>(<span class="literal">false</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Composition API (&lt;script setup&gt;)</span></span><br><span class="line"><span class="keyword">import</span> &#123; onBeforeRouteUpdate, onBeforeRouteLeave &#125; <span class="keyword">from</span> <span class="string">&quot;vue-router&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="title function_">onBeforeRouteUpdate</span>(<span class="function">(<span class="params">to, <span class="keyword">from</span>, next</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">  <span class="title function_">next</span>();</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="title function_">onBeforeRouteLeave</span>(<span class="function">(<span class="params">to, <span class="keyword">from</span>, next</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">  <span class="title function_">next</span>();</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// 注意: `onBeforeRouteEnter` 在 Composition API 中没有直接对应，</span></span><br><span class="line"><span class="comment">// 因为 `setup` 函数在组件实例创建前执行，可以进行类似逻辑。</span></span><br><span class="line"><span class="comment">// 如果需要在导航完成后访问组件实例，通常在 `onMounted` 之后结合 `nextTick` 或在 `setup` 返回的 Promise resolve 后操作。</span></span><br><span class="line"><span class="comment">// 或者，如果需要阻止导航，可以在 `setup` 中通过 `router.beforeEach` 或路由配置的 `beforeEnter` 实现。</span></span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="五、状态管理-State-Management-with-Pinia"><a href="#五、状态管理-State-Management-with-Pinia" class="headerlink" title="五、状态管理 (State Management with Pinia)"></a>五、状态管理 (State Management with Pinia)</h3><p>Pinia 是 Vue 官方推荐的状态管理库，它是一个轻量级、模块化、类型安全且对 Vue Devtools 支持友好的状态管理方案。它基于 Composition API 设计，与 Vue 3 配合得非常好。</p>
<h4 id="1-安装和基本配置-1"><a href="#1-安装和基本配置-1" class="headerlink" title="1. 安装和基本配置"></a>1. 安装和基本配置</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install pinia</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// src/main.js</span></span><br><span class="line"><span class="keyword">import</span> &#123; createApp &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; createPinia &#125; <span class="keyword">from</span> <span class="string">&quot;pinia&quot;</span>; <span class="comment">// 导入 Pinia</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">&quot;./App.vue&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">createApp</span>(<span class="title class_">App</span>);</span><br><span class="line"><span class="keyword">const</span> pinia = <span class="title function_">createPinia</span>(); <span class="comment">// 创建 Pinia 实例</span></span><br><span class="line"></span><br><span class="line">app.<span class="title function_">use</span>(pinia); <span class="comment">// 使用 Pinia</span></span><br><span class="line">app.<span class="title function_">mount</span>(<span class="string">&quot;#app&quot;</span>);</span><br></pre></td></tr></table></figure>

<h4 id="2-定义-Store"><a href="#2-定义-Store" class="headerlink" title="2. 定义 Store"></a>2. 定义 Store</h4><p>Store (仓库) 是用 <code>defineStore</code> 定义的，它需要一个唯一的名称 (ID) 作为第一个参数。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// src/stores/counter.js</span></span><br><span class="line"><span class="keyword">import</span> &#123; defineStore &#125; <span class="keyword">from</span> <span class="string">&quot;pinia&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; ref, computed &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>; <span class="comment">// 可以使用 Composition API 函数</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 推荐命名规范：useXxxxStore</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> useCounterStore = <span class="title function_">defineStore</span>(<span class="string">&quot;counter&quot;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// state (等同于 ref 或 reactive)</span></span><br><span class="line">  <span class="keyword">const</span> count = <span class="title function_">ref</span>(<span class="number">0</span>);</span><br><span class="line">  <span class="keyword">const</span> name = <span class="title function_">ref</span>(<span class="string">&quot;My Counter&quot;</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// getters (等同于 computed)</span></span><br><span class="line">  <span class="keyword">const</span> doubleCount = <span class="title function_">computed</span>(<span class="function">() =&gt;</span> count.<span class="property">value</span> * <span class="number">2</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// actions (等同于 methods)</span></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">increment</span>(<span class="params"></span>) &#123;</span><br><span class="line">    count.<span class="property">value</span>++;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">incrementBy</span>(<span class="params">amount</span>) &#123;</span><br><span class="line">    count.<span class="property">value</span> += amount;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">fetchInitialCount</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// 模拟 API 调用</span></span><br><span class="line">    <span class="keyword">const</span> response = <span class="keyword">await</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve</span>) =&gt;</span></span><br><span class="line">      <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> <span class="title function_">resolve</span>(&#123; <span class="attr">data</span>: <span class="number">10</span> &#125;), <span class="number">500</span>)</span><br><span class="line">    );</span><br><span class="line">    count.<span class="property">value</span> = response.<span class="property">data</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 必须返回所有需要暴露给外部的 state, getters, actions</span></span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    count,</span><br><span class="line">    name,</span><br><span class="line">    doubleCount,</span><br><span class="line">    increment,</span><br><span class="line">    incrementBy,</span><br><span class="line">    fetchInitialCount,</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 也可以使用 Options Store 的写法 (更像 Vuex)</span></span><br><span class="line"><span class="comment">// export const useUserStore = defineStore(&#x27;user&#x27;, &#123;</span></span><br><span class="line"><span class="comment">//   state: () =&gt; (&#123;</span></span><br><span class="line"><span class="comment">//     firstName: &#x27;John&#x27;,</span></span><br><span class="line"><span class="comment">//     lastName: &#x27;Doe&#x27;,</span></span><br><span class="line"><span class="comment">//     isAdmin: false</span></span><br><span class="line"><span class="comment">//   &#125;),</span></span><br><span class="line"><span class="comment">//   getters: &#123;</span></span><br><span class="line"><span class="comment">//     fullName: (state) =&gt; `$&#123;state.firstName&#125; $&#123;state.lastName&#125;`,</span></span><br><span class="line"><span class="comment">//     // 可以访问其他 getter</span></span><br><span class="line"><span class="comment">//     fancyName(state) &#123;</span></span><br><span class="line"><span class="comment">//       return `✨ $&#123;this.fullName&#125; ✨`; // getter 中 this 指向 store 实例</span></span><br><span class="line"><span class="comment">//     &#125;</span></span><br><span class="line"><span class="comment">//   &#125;,</span></span><br><span class="line"><span class="comment">//   actions: &#123;</span></span><br><span class="line"><span class="comment">//     login() &#123;</span></span><br><span class="line"><span class="comment">//       this.isAdmin = true; // action 中 this 指向 store 实例</span></span><br><span class="line"><span class="comment">//     &#125;,</span></span><br><span class="line"><span class="comment">//     logout() &#123;</span></span><br><span class="line"><span class="comment">//       this.isAdmin = false;</span></span><br><span class="line"><span class="comment">//     &#125;,</span></span><br><span class="line"><span class="comment">//     async fetchUser(userId) &#123;</span></span><br><span class="line"><span class="comment">//       // const user = await api.fetchUser(userId);</span></span><br><span class="line"><span class="comment">//       // this.firstName = user.firstName;</span></span><br><span class="line"><span class="comment">//       // this.lastName = user.lastName;</span></span><br><span class="line"><span class="comment">//     &#125;</span></span><br><span class="line"><span class="comment">//   &#125;</span></span><br><span class="line"><span class="comment">// &#125;);</span></span><br></pre></td></tr></table></figure>

<h4 id="3-在组件中使用-Store"><a href="#3-在组件中使用-Store" class="headerlink" title="3. 在组件中使用 Store"></a>3. 在组件中使用 Store</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">import</span> &#123; useCounterStore &#125; <span class="keyword">from</span> <span class="string">&quot;@/stores/counter&quot;</span>; <span class="comment">// 导入 store</span></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">import</span> &#123; storeToRefs &#125; <span class="keyword">from</span> <span class="string">&quot;pinia&quot;</span>; <span class="comment">// 用于保持响应性解构</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">const</span> counterStore = <span class="title function_">useCounterStore</span>(); <span class="comment">// 获取 store 实例</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="comment">// 直接访问 state 和 getters (它们是响应式的)</span></span></span><br><span class="line"><span class="language-javascript">  <span class="comment">// console.log(counterStore.count);</span></span></span><br><span class="line"><span class="language-javascript">  <span class="comment">// console.log(counterStore.doubleCount);</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="comment">// 调用 actions</span></span></span><br><span class="line"><span class="language-javascript">  <span class="comment">// counterStore.increment();</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="comment">// 为了在模板中使用并保持响应性，或者从 store 中解构属性：</span></span></span><br><span class="line"><span class="language-javascript">  <span class="comment">// 1. 直接使用 store.property</span></span></span><br><span class="line"><span class="language-javascript">  <span class="comment">// 2. 使用 storeToRefs() 来创建 refs</span></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">const</span> &#123; count, name, doubleCount &#125; = <span class="title function_">storeToRefs</span>(counterStore);</span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">const</span> &#123; increment, incrementBy &#125; = counterStore; <span class="comment">// actions 可以直接解构</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">function</span> <span class="title function_">handleIncrement</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">increment</span>(); <span class="comment">// 或者 counterStore.increment();</span></span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">function</span> <span class="title function_">handleIncrementBy5</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">incrementBy</span>(<span class="number">5</span>); <span class="comment">// 或者 counterStore.incrementBy(5);</span></span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  counterStore.<span class="title function_">fetchInitialCount</span>(); <span class="comment">// 可以在 setup 中调用 action 初始化</span></span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h2</span>&gt;</span>&#123;&#123; name &#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>Count: &#123;&#123; count &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>Double Count: &#123;&#123; doubleCount &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;handleIncrement&quot;</span>&gt;</span>Increment<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;handleIncrementBy5&quot;</span>&gt;</span>Increment by 5<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;counterStore.count++&quot;</span>&gt;</span>Directly Modify State (works)<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="4-Store-的主要特性"><a href="#4-Store-的主要特性" class="headerlink" title="4. Store 的主要特性"></a>4. Store 的主要特性</h4><ul>
<li><strong>类型安全</strong>: Pinia 对 TypeScript 有很好的支持。</li>
<li><strong>Devtools 支持</strong>: 与 Vue Devtools 集成良好，可以方便地查看 state、getters 和跟踪 actions。</li>
<li><strong>模块化</strong>: 每个 store 都是一个独立的模块，易于组织和维护。</li>
<li><strong>轻量级</strong>: 非常小的体积。</li>
<li><strong>插件系统</strong>: 可以通过插件扩展 Pinia 的功能。</li>
<li><strong>服务器端渲染 (SSR) 支持</strong>: Pinia 支持 SSR。</li>
<li><strong>直接修改 State</strong>: 可以直接修改 store 的 state (例如 <code>counterStore.count++</code>)，这在 Vuex 中通常不推荐。Pinia 的 devtools 仍然可以跟踪这些更改。</li>
<li><strong>订阅 State 变化</strong>: <code>store.$subscribe((mutation, state) =&gt; &#123; ... &#125;)</code></li>
<li><strong>订阅 Action 调用</strong>: <code>store.$onAction((&#123; name, store, args, after, onError &#125;) =&gt; &#123; ... &#125;)</code></li>
<li><strong>重置 State</strong>: <code>store.$reset()</code> (仅适用于 Options Store 写法且定义了 <code>state</code> 函数)。对于 Setup Store，需要手动实现重置逻辑。</li>
<li><strong>热模块替换 (HMR)</strong>: 支持 HMR，在开发过程中修改 store 代码无需刷新页面。</li>
</ul>
<p>Pinia 的设计哲学是提供一个简单直观的 API，同时保持强大的功能和灵活性，使其成为 Vue 3 项目中状态管理的首选。</p>
<h3 id="六、其他重要特性与最佳实践"><a href="#六、其他重要特性与最佳实践" class="headerlink" title="六、其他重要特性与最佳实践"></a>六、其他重要特性与最佳实践</h3><h4 id="1-TypeScript-支持"><a href="#1-TypeScript-支持" class="headerlink" title="1. TypeScript 支持"></a>1. TypeScript 支持</h4><p>Vue 3 从一开始就考虑了 TypeScript 支持，其 API 设计对类型推断非常友好，特别是 Composition API。<br><code>defineProps</code>, <code>defineEmits</code>, <code>defineExpose</code> 等宏在 <code>&lt;script setup&gt;</code> 中都提供了良好的类型支持。</p>
<h4 id="2-性能优化"><a href="#2-性能优化" class="headerlink" title="2. 性能优化"></a>2. 性能优化</h4><ul>
<li><strong>更小的包体积</strong>: 通过 tree-shaking 和新的全局 API 设计。</li>
<li><strong>更快的渲染</strong>: 静态树提升 (Static Tree Hoisting)、更新类型标记 (Patch Flags)、缓存事件处理函数等编译时优化。</li>
<li><strong>更高效的响应式系统</strong>: 基于 Proxy。</li>
<li><strong>虚拟 DOM 重写</strong>: 提高了 diff 算法的效率。</li>
</ul>
<h4 id="3-标签的-v-bind"><a href="#3-标签的-v-bind" class="headerlink" title="3. &lt;style&gt; 标签的 v-bind"></a>3. <code>&lt;style&gt;</code> 标签的 <code>v-bind</code></h4><p>可以在 SFC 的 <code>&lt;style&gt;</code> 标签中使用 <code>v-bind</code> 将 CSS 值链接到组件的动态状态。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">import</span> &#123; ref &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">const</span> themeColor = <span class="title function_">ref</span>(<span class="string">&quot;blue&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">const</span> fontSize = <span class="title function_">ref</span>(<span class="string">&quot;16px&quot;</span>);</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span>&gt;</span>This text will be styled dynamically.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;themeColor = &#x27;red&#x27;; fontSize = &#x27;20px&#x27;&quot;</span>&gt;</span>Change Style<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">  <span class="selector-tag">p</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">color</span>: <span class="built_in">v-bind</span>(themeColor); <span class="comment">/* 将 CSS color 绑定到 themeColor ref */</span></span></span><br><span class="line"><span class="language-css">    <span class="attribute">font-size</span>: <span class="built_in">v-bind</span>(fontSize);</span></span><br><span class="line"><span class="language-css">    <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="built_in">v-bind</span>(<span class="string">&quot;themeColor&quot;</span>); <span class="comment">/* 也可以使用带引号的 JS 表达式 */</span></span></span><br><span class="line"><span class="language-css">  &#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>这使得基于组件状态动态调整样式变得非常方便，而无需内联样式或复杂的 class 绑定。</p>
<h4 id="4-组合式函数-Composables"><a href="#4-组合式函数-Composables" class="headerlink" title="4. 组合式函数 (Composables)"></a>4. 组合式函数 (Composables)</h4><p>组合式函数是利用 Vue Composition API 封装和复用<strong>有状态逻辑</strong>的函数。它们是组织和共享跨组件逻辑的强大模式。</p>
<ul>
<li><strong>命名约定</strong>: 通常以 <code>use</code> 开头，例如 <code>useMousePosition</code>、<code>useFetchData</code>。</li>
<li><strong>功能</strong>:<ul>
<li>可以包含响应式状态 (<code>ref</code>, <code>reactive</code>)。</li>
<li>可以包含计算属性 (<code>computed</code>)。</li>
<li>可以包含方法。</li>
<li>可以包含生命周期钩子 (<code>onMounted</code>, <code>onUnmounted</code> 等)。</li>
<li>可以调用其他组合式函数。</li>
</ul>
</li>
<li><strong>返回值</strong>: 通常返回一个包含响应式状态和方法的对象，供组件解构使用。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// composables/useMousePosition.js</span></span><br><span class="line"><span class="keyword">import</span> &#123; ref, onMounted, onUnmounted &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">useMousePosition</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> x = <span class="title function_">ref</span>(<span class="number">0</span>);</span><br><span class="line">  <span class="keyword">const</span> y = <span class="title function_">ref</span>(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">update</span>(<span class="params">event</span>) &#123;</span><br><span class="line">    x.<span class="property">value</span> = event.<span class="property">pageX</span>;</span><br><span class="line">    y.<span class="property">value</span> = event.<span class="property">pageY</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">onMounted</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(<span class="string">&quot;mousemove&quot;</span>, update);</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="title function_">onUnmounted</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">window</span>.<span class="title function_">removeEventListener</span>(<span class="string">&quot;mousemove&quot;</span>, update);</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> &#123; x, y &#125;; <span class="comment">// 暴露响应式状态</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">import</span> &#123; useMousePosition &#125; <span class="keyword">from</span> <span class="string">&quot;./composables/useMousePosition&quot;</span>;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">const</span> &#123; x, y &#125; = <span class="title function_">useMousePosition</span>();</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span>Mouse position: X = &#123;&#123; x &#125;&#125;, Y = &#123;&#123; y &#125;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>组合式函数是 Composition API 核心优势之一，极大地提升了 Vue 应用中逻辑复用的能力和代码组织的清晰度。</p>
<h4 id="5-最佳实践建议"><a href="#5-最佳实践建议" class="headerlink" title="5. 最佳实践建议"></a>5. 最佳实践建议</h4><ul>
<li><strong>拥抱 Composition API</strong>: 特别是对于中大型组件和需要逻辑复用的场景。<code>&lt;script setup&gt;</code> 是推荐的语法。</li>
<li><strong>合理组织代码</strong>: 将可复用的逻辑提取到组合式函数中。将相关的 store 模块化。</li>
<li><strong>显式声明 Props 和 Emits</strong>: 增强组件接口的清晰度和可维护性。</li>
<li><strong>使用 <code>key</code></strong>: 在 <code>v-for</code> 中始终提供唯一的 <code>key</code>。</li>
<li><strong>路由懒加载</strong>: 对于大型应用，使用路由懒加载来优化初始加载时间。</li>
<li><strong>组件尽可能小而专注</strong>: 遵循单一职责原则。</li>
<li><strong>利用 Vue Devtools</strong>: 进行调试和性能分析。</li>
<li><strong>编写单元测试和端到端测试</strong>: 保证代码质量。</li>
<li><strong>关注性能</strong>:<ul>
<li>对于大型列表，考虑虚拟滚动。</li>
<li>使用 <code>v-once</code> 对于不更新的静态内容。</li>
<li>合理使用 <code>shallowRef</code> 和 <code>shallowReactive</code>。</li>
<li>注意 <code>computed</code> 属性的缓存特性。</li>
</ul>
</li>
<li><strong>保持依赖更新</strong>: 定期更新 Vue 和相关库到最新稳定版本，以获得最新的特性和安全修复。</li>
</ul>
<h3 id="七、从-Vue-2-迁移"><a href="#七、从-Vue-2-迁移" class="headerlink" title="七、从 Vue 2 迁移"></a>七、从 Vue 2 迁移</h3><p>对于从 Vue 2 迁移到 Vue 3 的项目，Vue 官方提供了一个迁移指南和迁移构建版本 (@vue&#x2F;compat)，它提供了与 Vue 2 兼容的行为，帮助逐步迁移。主要关注点包括：</p>
<ul>
<li>全局 API 的变更。</li>
<li><code>v-model</code> 的变化。</li>
<li><code>emits</code> 选项的必要性。</li>
<li>插槽语法的变化 (从 <code>slot</code> attribute 到 <code>v-slot</code> 指令)。</li>
<li>生命周期钩子的名称变化 (例如 <code>destroyed</code> 变为 <code>unmounted</code>)。</li>
<li>响应式系统的一些底层差异 (特别是对于数组和对象的某些边缘情况)。</li>
<li>移除 <code>keyCode</code> 支持，推荐使用 <code>event.key</code>。</li>
<li>移除 <code>$on</code>, <code>$off</code>, <code>$once</code> 实例方法，推荐使用外部库 (如 mitt) 或 <code>provide/inject</code> 实现事件总线。</li>
<li>过滤器 (filters) 被移除，推荐使用方法调用或计算属性替代。</li>
</ul>
<p>建议详细阅读官方迁移文档以获得全面的指导。</p>
<hr>
<p>本文档涵盖了 Vue 3 的大部分常用知识点，希望能为你的 Vue 3 开发之旅提供有力的支持。随着 Vue 生态的不断发展，建议持续关注官方文档和社区动态，以获取最新的信息和最佳实践。<br>好的，这是一份详细的 Vue 3 常用知识文档，涵盖了核心概念、API、常用库以及一些最佳实践。</p>
<hr>
<p><strong>Vue 3 常用知识点详解</strong></p>
<p>Vue.js (通常称为 Vue) 是一个用于构建用户界面的<strong>渐进式</strong> JavaScript 框架。与庞大的框架不同，Vue 被设计为可以自底向上逐层应用。Vue 的核心库只关注视图层，易于上手，也便于与第三方库或既有项目整合。另一方面，当与现代化的工具链以及各种支持类库结合使用时，Vue 也完全能够为复杂的单页应用 (SPA) 提供驱动。</p>
<p>Vue 3 是 Vue.js 的最新主要版本，带来了显著的性能改进、更好的 TypeScript 支持、新的 API（如 Composition API）以及一些新功能。</p>
<p><strong>一、核心概念</strong></p>
<ol>
<li><p><strong>创建 Vue 应用实例</strong></p>
<ul>
<li><p>每个 Vue 应用都是通过 <code>createApp</code> 函数创建一个新的<strong>应用实例</strong>开始的：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createApp &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">&quot;./App.vue&quot;</span>; <span class="comment">// 根组件</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">createApp</span>(<span class="title class_">App</span>);</span><br><span class="line">app.<span class="title function_">mount</span>(<span class="string">&quot;#app&quot;</span>); <span class="comment">// 挂载到 DOM 元素</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>根组件 (<code>App.vue</code>) 是整个应用组件树的起点。</p>
</li>
</ul>
</li>
<li><p><strong>模板语法 (Template Syntax)</strong></p>
<ul>
<li><p>Vue 使用一种基于 HTML 的模板语法，允许开发者声明式地将 DOM 绑定至底层 Vue 实例的数据。</p>
</li>
<li><p><strong>文本插值</strong>: 使用双大括号 <code>&#123;&#123; &#125;&#125;</code> (Mustache 语法) 显示数据。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;p&gt;Message: &#123;&#123; message &#125;&#125;&lt;/p&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">import &#123; ref &#125; from &quot;vue&quot;;</span><br><span class="line">const message = ref(&quot;Hello Vue 3!&quot;);</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>属性绑定</strong>: 使用 <code>v-bind</code> 指令 (简写 <code>:</code>) 动态绑定 HTML 属性。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div :id=&quot;dynamicId&quot;&gt;&lt;/div&gt;</span><br><span class="line">  &lt;button :disabled=&quot;isButtonDisabled&quot;&gt;Button&lt;/button&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">import &#123; ref &#125; from &quot;vue&quot;;</span><br><span class="line">const dynamicId = ref(&quot;my-element&quot;);</span><br><span class="line">const isButtonDisabled = ref(true);</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>事件监听</strong>: 使用 <code>v-on</code> 指令 (简写 <code>@</code>) 监听 DOM 事件。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;button @click=&quot;increment&quot;&gt;Count is: &#123;&#123; count &#125;&#125;&lt;/button&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">import &#123; ref &#125; from &quot;vue&quot;;</span><br><span class="line">const count = ref(0);</span><br><span class="line">function increment() &#123;</span><br><span class="line">  count.value++;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>条件渲染</strong>: 使用 <code>v-if</code>, <code>v-else-if</code>, <code>v-else</code> 控制元素的渲染。使用 <code>v-show</code> 控制元素的 CSS <code>display</code> 属性。</p>
</li>
<li><p><strong>列表渲染</strong>: 使用 <code>v-for</code> 遍历数组或对象来渲染列表。务必提供 <code>:key</code> 以获得最佳性能和行为。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;ul&gt;</span><br><span class="line">    &lt;li v-for=&quot;item in items&quot; :key=&quot;item.id&quot;&gt;</span><br><span class="line">      &#123;&#123; item.text &#125;&#125;</span><br><span class="line">    &lt;/li&gt;</span><br><span class="line">  &lt;/ul&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">import &#123; ref &#125; from &quot;vue&quot;;</span><br><span class="line">const items = ref([</span><br><span class="line">  &#123; id: 1, text: &quot;Learn Vue&quot; &#125;,</span><br><span class="line">  &#123; id: 2, text: &quot;Build something awesome&quot; &#125;,</span><br><span class="line">]);</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>表单输入绑定</strong>: 使用 <code>v-model</code> 在表单 <code>&lt;input&gt;</code>, <code>&lt;textarea&gt;</code>, <code>&lt;select&gt;</code> 元素上创建双向数据绑定。</p>
</li>
</ul>
</li>
<li><p><strong>响应式基础 (Reactivity Fundamentals)</strong></p>
<ul>
<li><p>Vue 最独特的特性之一是其<strong>响应式系统</strong>。当组件的状态（数据）发生变化时，视图会自动更新。</p>
</li>
<li><p>Vue 3 使用 ES2015 <strong>Proxy</strong> 来实现响应式，这比 Vue 2 的 <code>Object.defineProperty</code> 更强大、性能更好。</p>
</li>
<li><p><strong><code>ref()</code></strong>: 用于创建<strong>基本类型</strong> (String, Number, Boolean 等) 或<strong>对象</strong>的响应式引用。访问或修改 <code>ref</code> 的值需要通过 <code>.value</code> 属性。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; ref &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span><br><span class="line"><span class="keyword">const</span> count = <span class="title function_">ref</span>(<span class="number">0</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(count.<span class="property">value</span>); <span class="comment">// 0</span></span><br><span class="line">count.<span class="property">value</span>++;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(count.<span class="property">value</span>); <span class="comment">// 1</span></span><br></pre></td></tr></table></figure>
<ul>
<li>在模板中使用 <code>ref</code> 时，不需要 <code>.value</code> (会自动解包)。</li>
</ul>
</li>
<li><p><strong><code>reactive()</code></strong>: 用于创建<strong>对象</strong>或<strong>数组</strong>的响应式代理。它会“深度”转换对象，内部嵌套的对象也会是响应式的。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; reactive &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span><br><span class="line"><span class="keyword">const</span> state = <span class="title function_">reactive</span>(&#123;</span><br><span class="line">  <span class="attr">count</span>: <span class="number">0</span>,</span><br><span class="line">  <span class="attr">user</span>: &#123; <span class="attr">name</span>: <span class="string">&quot;Vue&quot;</span> &#125;,</span><br><span class="line">&#125;);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(state.<span class="property">count</span>); <span class="comment">// 0</span></span><br><span class="line">state.<span class="property">count</span>++;</span><br><span class="line">state.<span class="property">user</span>.<span class="property">name</span> = <span class="string">&quot;Vue 3&quot;</span>;</span><br></pre></td></tr></table></figure>
<ul>
<li><code>reactive()</code> 返回的是代理对象，直接访问属性即可，不需要 <code>.value</code>。</li>
<li><strong>限制</strong>: <code>reactive()</code> 不能应用于基本类型。<code>reactive()</code> 创建的代理对象与原始对象不全等 (<code>===</code>)。</li>
</ul>
</li>
<li><p><strong><code>computed()</code></strong>: 用于声明基于其他响应式数据计算而来的<strong>计算属性</strong>。计算属性具有缓存特性，只有当其依赖的响应式数据发生变化时才会重新计算。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; ref, computed &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span><br><span class="line"><span class="keyword">const</span> firstName = <span class="title function_">ref</span>(<span class="string">&quot;John&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> lastName = <span class="title function_">ref</span>(<span class="string">&quot;Doe&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> fullName = <span class="title function_">computed</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Computing fullName&quot;</span>); <span class="comment">// 只在依赖变化时执行</span></span><br><span class="line">  <span class="keyword">return</span> <span class="string">`<span class="subst">$&#123;firstName.value&#125;</span> <span class="subst">$&#123;lastName.value&#125;</span>`</span>;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(fullName.<span class="property">value</span>); <span class="comment">// John Doe</span></span><br><span class="line">lastName.<span class="property">value</span> = <span class="string">&quot;Smith&quot;</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(fullName.<span class="property">value</span>); <span class="comment">// John Smith</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong><code>watch()</code> &amp; <code>watchEffect()</code></strong>: 用于<strong>侦听</strong>响应式数据的变化并执行副作用（如 API 调用、DOM 操作）。</p>
<ul>
<li><code>watch()</code>: 需要明确指定要侦听的数据源，并在回调函数中接收新值和旧值。它默认是惰性的（只在数据变化后执行）。<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; ref, watch &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span><br><span class="line"><span class="keyword">const</span> count = <span class="title function_">ref</span>(<span class="number">0</span>);</span><br><span class="line"><span class="title function_">watch</span>(count, <span class="function">(<span class="params">newValue, oldValue</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`Count changed from <span class="subst">$&#123;oldValue&#125;</span> to <span class="subst">$&#123;newValue&#125;</span>`</span>);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> (count.<span class="property">value</span> = <span class="number">5</span>), <span class="number">1000</span>);</span><br></pre></td></tr></table></figure></li>
<li><code>watchEffect()</code>: 会<strong>立即执行</strong>一次回调函数，并自动追踪回调函数中使用的所有响应式依赖。当任何依赖变化时，回调会重新执行。<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; ref, watchEffect &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span><br><span class="line"><span class="keyword">const</span> userID = <span class="title function_">ref</span>(<span class="number">1</span>);</span><br><span class="line"><span class="title function_">watchEffect</span>(<span class="title function_">async</span> () =&gt; &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`Workspaceing data for user <span class="subst">$&#123;userID.value&#125;</span>`</span>);</span><br><span class="line">  <span class="comment">// const response = await fetch(...)</span></span><br><span class="line">  <span class="comment">// console.log(&#x27;Data fetched&#x27;)</span></span><br><span class="line">&#125;);</span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> (userID.<span class="property">value</span> = <span class="number">2</span>), <span class="number">1000</span>); <span class="comment">// 会触发 watchEffect 再次执行</span></span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
</li>
<li><p><strong>组件基础 (Component Basics)</strong></p>
<ul>
<li><p>组件允许我们将 UI 划分为独立的、可重用的部分。</p>
</li>
<li><p><strong>单文件组件 (SFC - Single File Component)</strong>: <code>.vue</code> 文件是 Vue 的标准组件格式，它将模板 (<code>&lt;template&gt;</code>)、逻辑 (<code>&lt;script&gt;</code>) 和样式 (<code>&lt;style&gt;</code>) 封装在同一个文件中。</p>
</li>
<li><p><strong>Props</strong>: 父组件向子组件传递数据的方式。子组件需要在 <code>props</code> 选项或 <code>defineProps</code> (在 <code>&lt;script setup&gt;</code> 中) 中声明它期望接收的 props。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;ChildComponent :message=&quot;parentMessage&quot; :count=&quot;parentCount&quot; /&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">import &#123; ref &#125; from &quot;vue&quot;;</span><br><span class="line">import ChildComponent from &quot;./ChildComponent.vue&quot;;</span><br><span class="line">const parentMessage = ref(&quot;Hello from parent&quot;);</span><br><span class="line">const parentCount = ref(10);</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;p&gt;&#123;&#123; message &#125;&#125;&lt;/p&gt;</span><br><span class="line">  &lt;p&gt;Count: &#123;&#123; count &#125;&#125;&lt;/p&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">// 使用 defineProps 宏声明 props</span><br><span class="line">const props = defineProps(&#123;</span><br><span class="line">  message: String, // 可以指定类型</span><br><span class="line">  count: &#123;</span><br><span class="line">    // 可以使用对象语法进行更详细的验证</span><br><span class="line">    type: Number,</span><br><span class="line">    required: true,</span><br><span class="line">    default: 0,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br><span class="line">// 可以直接在模板或脚本中使用 props.message, props.count</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>Emits (事件)</strong>: 子组件向父组件发送消息（通知事件发生）的方式。子组件使用 <code>$emit</code> 方法或 <code>defineEmits</code> (在 <code>&lt;script setup&gt;</code> 中) 触发事件，父组件使用 <code>v-on</code> (或 <code>@</code>) 监听。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;button @click=&quot;notifyParent&quot;&gt;Notify Parent&lt;/button&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">// 使用 defineEmits 宏声明要触发的事件</span><br><span class="line">const emit = defineEmits([&quot;response&quot;]);</span><br><span class="line"></span><br><span class="line">function notifyParent() &#123;</span><br><span class="line">  emit(&quot;response&quot;, &quot;Data from child&quot;); // 触发事件并传递数据</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;ChildComponent @response=&quot;handleResponse&quot; /&gt;</span><br><span class="line">  &lt;p&gt;Received: &#123;&#123; childData &#125;&#125;&lt;/p&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">import &#123; ref &#125; from &quot;vue&quot;;</span><br><span class="line">import ChildComponent from &quot;./ChildComponent.vue&quot;;</span><br><span class="line">const childData = ref(&quot;&quot;);</span><br><span class="line">function handleResponse(payload) &#123;</span><br><span class="line">  childData.value = payload;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p><strong>生命周期钩子 (Lifecycle Hooks)</strong></p>
<ul>
<li><p>每个 Vue 组件实例在创建时都会经历一系列初始化步骤。生命周期钩子允许我们在特定阶段添加自己的代码。</p>
</li>
<li><p>常用钩子：</p>
<ul>
<li><code>onMounted</code>: 组件挂载（插入 DOM）完成后调用。适合执行需要 DOM 的操作、数据获取等。</li>
<li><code>onUpdated</code>: 组件因为响应式状态变更而更新其 DOM 树之后调用。</li>
<li><code>onUnmounted</code>: 组件实例被卸载（从 DOM 移除）之后调用。适合清理定时器、事件监听器等。</li>
<li>其他：<code>onBeforeMount</code>, <code>onBeforeUpdate</code>, <code>onBeforeUnmount</code>, <code>onErrorCaptured</code>, <code>onRenderTracked</code>, <code>onRenderTriggered</code>。</li>
</ul>
</li>
<li><p>在 Composition API (<code>&lt;script setup&gt;</code>) 中使用：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup&gt;</span><br><span class="line">import &#123; onMounted, onUnmounted, ref &#125; from &quot;vue&quot;;</span><br><span class="line"></span><br><span class="line">const intervalId = ref(null);</span><br><span class="line"></span><br><span class="line">onMounted(() =&gt; &#123;</span><br><span class="line">  console.log(&quot;Component is mounted!&quot;);</span><br><span class="line">  // 访问 DOM 或启动定时器等</span><br><span class="line">  intervalId.value = setInterval(() =&gt; &#123;</span><br><span class="line">    // ...</span><br><span class="line">  &#125;, 1000);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">onUnmounted(() =&gt; &#123;</span><br><span class="line">  console.log(&quot;Component is unmounted!&quot;);</span><br><span class="line">  // 清理工作</span><br><span class="line">  clearInterval(intervalId.value);</span><br><span class="line">&#125;);</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>在 Options API 中使用：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="title function_">data</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">/* ... */</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">mounted</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Component is mounted!&quot;</span>);</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">unmounted</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Component is unmounted!&quot;</span>);</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ol>
<p><strong>二、Composition API (组合式 API)</strong></p>
<p>Composition API 是 Vue 3 引入的一套新的、基于函数的 API，旨在解决 Options API 在大型应用中逻辑组织和复用方面的限制。</p>
<ol>
<li><p><strong><code>setup()</code> 函数</strong>:</p>
<ul>
<li>Composition API 的入口点。它在组件实例创建<strong>之前</strong>执行（在 <code>beforeCreate</code> 和 <code>created</code> 之间）。</li>
<li>接收 <code>props</code> 和 <code>context</code> (包含 <code>attrs</code>, <code>slots</code>, <code>emit</code>) 作为参数。</li>
<li>函数内部定义的响应式状态、计算属性、方法等，需要<strong>显式返回</strong>才能在模板中使用。</li>
<li><code>setup()</code> 内部 <code>this</code> 不是指向组件实例 (通常是 <code>undefined</code>)。</li>
<li>现在更推荐使用 <code>&lt;script setup&gt;</code> 语法糖。</li>
</ul>
</li>
<li><p><strong><code>&lt;script setup&gt;</code></strong>:</p>
<ul>
<li><p>是 <code>setup()</code> 函数的<strong>语法糖</strong>，极大简化了 Composition API 的使用。</p>
</li>
<li><p>在 <code>&lt;script setup&gt;</code> 中声明的顶层变量、函数和导入的组件都<strong>自动暴露</strong>给模板。</p>
</li>
<li><p>不需要显式返回。</p>
</li>
<li><p>代码更简洁、更符合直觉。</p>
</li>
<li><p><strong>是目前在 SFC 中使用 Composition API 的推荐方式。</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;p&gt;Count: &#123;&#123; count &#125;&#125;&lt;/p&gt;</span><br><span class="line">  &lt;button @click=&quot;increment&quot;&gt;Increment&lt;/button&gt;</span><br><span class="line">  &lt;MyComponent :prop=&quot;someValue&quot; /&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">import &#123; ref &#125; from &quot;vue&quot;;</span><br><span class="line">import MyComponent from &quot;./MyComponent.vue&quot;; // 导入的组件自动可用</span><br><span class="line"></span><br><span class="line">// 响应式状态</span><br><span class="line">const count = ref(0);</span><br><span class="line">const someValue = ref(&quot;hello&quot;);</span><br><span class="line"></span><br><span class="line">// 方法</span><br><span class="line">function increment() &#123;</span><br><span class="line">  count.value++;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 生命周期钩子</span><br><span class="line">import &#123; onMounted &#125; from &quot;vue&quot;;</span><br><span class="line">onMounted(() =&gt; &#123;</span><br><span class="line">  console.log(&quot;Mounted in &lt;script setup&gt;&quot;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">// 无需 return</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p><strong>响应式工具函数</strong>:</p>
<ul>
<li>除了 <code>ref</code>, <code>reactive</code>, <code>computed</code>, <code>watch</code>, <code>watchEffect</code> 之外，还有：<ul>
<li><code>toRefs()</code>: 将一个响应式对象 (<code>reactive</code> 创建的) 转换为一个普通对象，其中每个属性都是指向原始对象相应属性的 <code>ref</code>。常用于解构 <code>reactive</code> 对象而保持响应性。</li>
<li><code>isRef()</code>, <code>isReactive()</code>, <code>isReadonly()</code>, <code>isProxy()</code>: 用于检查对象的响应式类型。</li>
<li><code>readonly()</code>: 创建一个对象的只读代理。</li>
</ul>
</li>
</ul>
</li>
<li><p><strong>依赖注入 (<code>provide</code> &#x2F; <code>inject</code>)</strong>:</p>
<ul>
<li>允许一个祖先组件向其所有后代组件注入数据或方法，无论层级有多深。</li>
<li><code>provide()</code>: 在祖先组件中提供数据&#x2F;方法。</li>
<li><code>inject()</code>: 在后代组件中注入数据&#x2F;方法。</li>
<li>常用于跨多层级组件共享状态或功能，避免逐层传递 props。</li>
</ul>
</li>
</ol>
<p><strong>三、常用库生态</strong></p>
<ol>
<li><p><strong>路由 (Vue Router)</strong></p>
<ul>
<li>Vue 的官方路由管理器。用于构建单页应用 (SPA)。</li>
<li>核心概念：<ul>
<li><strong>路由定义</strong>: 定义路径 (URL) 与组件之间的映射关系。</li>
<li><code>&lt;router-link&gt;</code>: 用于声明式导航的组件，会渲染成 <code>&lt;a&gt;</code> 标签。</li>
<li><code>&lt;router-view&gt;</code>: 路由匹配到的组件将在此处渲染。</li>
<li><strong>编程式导航</strong>: 使用 <code>router.push()</code>, <code>router.replace()</code>, <code>router.go()</code> 等 API 进行导航。</li>
<li><strong>导航守卫</strong>: 在导航过程中执行的钩子函数，用于权限控制、数据获取等。</li>
</ul>
</li>
<li>Vue Router 4 是为 Vue 3 设计的版本。</li>
</ul>
</li>
<li><p><strong>状态管理 (Pinia)</strong></p>
<ul>
<li><p>Vue 的<strong>新一代官方状态管理库</strong>，由 Vue 核心团队维护。</p>
</li>
<li><p><strong>推荐用于新的 Vue 3 项目</strong> (取代 Vuex)。</p>
</li>
<li><p>核心概念：</p>
<ul>
<li><strong>Store</strong>: 定义一个包含 state（状态）、getters（计算属性）和 actions（方法）的模块。</li>
<li><strong><code>defineStore()</code></strong>: 用于定义一个 Store。</li>
<li><strong>State</strong>: 响应式数据源 (<code>ref</code>, <code>reactive</code>)。</li>
<li><strong>Getters</strong>: 类似于 Store 的计算属性。</li>
<li><strong>Actions</strong>: 类似于 Store 的方法，可以包含异步操作。</li>
<li><strong>模块化</strong>: 天然支持模块化，无需手动组合。</li>
<li><strong>更好的 TypeScript 支持</strong>: 提供了优秀的类型推断。</li>
<li><strong>更简洁的 API</strong>: 使用起来更简单直观。</li>
</ul>
</li>
<li><p>示例：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// stores/counter.js</span></span><br><span class="line"><span class="keyword">import</span> &#123; defineStore &#125; <span class="keyword">from</span> <span class="string">&quot;pinia&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; ref, computed &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> useCounterStore = <span class="title function_">defineStore</span>(<span class="string">&quot;counter&quot;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// state (使用 ref/reactive)</span></span><br><span class="line">  <span class="keyword">const</span> count = <span class="title function_">ref</span>(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// getters (使用 computed)</span></span><br><span class="line">  <span class="keyword">const</span> doubleCount = <span class="title function_">computed</span>(<span class="function">() =&gt;</span> count.<span class="property">value</span> * <span class="number">2</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// actions (普通函数)</span></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">increment</span>(<span class="params"></span>) &#123;</span><br><span class="line">    count.<span class="property">value</span>++;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> &#123; count, doubleCount, increment &#125;; <span class="comment">// 暴露 state, getters, actions</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 在组件中使用</span></span><br><span class="line"><span class="keyword">import</span> &#123; useCounterStore &#125; <span class="keyword">from</span> <span class="string">&quot;@/stores/counter&quot;</span>;</span><br><span class="line"><span class="keyword">const</span> counter = <span class="title function_">useCounterStore</span>();</span><br><span class="line"><span class="comment">// counter.count, counter.doubleCount, counter.increment()</span></span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ol>
<p><strong>四、高级&#x2F;常用特性</strong></p>
<ol>
<li><p><strong>插槽 (Slots)</strong></p>
<ul>
<li><p>允许父组件向子组件的模板中<strong>注入内容</strong>，使组件更具灵活性和可复用性。</p>
</li>
<li><p><strong>默认插槽</strong>: 子组件中使用 <code>&lt;slot&gt;&lt;/slot&gt;</code> 作为内容出口。</p>
</li>
<li><p><strong>具名插槽</strong>: 子组件使用 <code>&lt;slot name=&quot;header&quot;&gt;&lt;/slot&gt;</code> 定义命名出口，父组件使用 <code>&lt;template v-slot:header&gt;</code> 或 <code>#header</code> 语法向特定插槽提供内容。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;header&gt;</span><br><span class="line">    &lt;slot name=&quot;header&quot;&gt;Default Header&lt;/slot&gt;</span><br><span class="line">  &lt;/header&gt;</span><br><span class="line">  &lt;main&gt;</span><br><span class="line">    &lt;slot&gt;&lt;/slot&gt;</span><br><span class="line">  &lt;/main&gt;</span><br><span class="line">  &lt;footer&gt;</span><br><span class="line">    &lt;slot name=&quot;footer&quot;&gt;&lt;/slot&gt;</span><br><span class="line">  &lt;/footer&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;LayoutComponent&gt;</span><br><span class="line">    &lt;template v-slot:header&gt; &lt;h1&gt;My Custom Header&lt;/h1&gt; &lt;/template&gt;</span><br><span class="line"></span><br><span class="line">    &lt;p&gt;This is the main content.&lt;/p&gt;</span><br><span class="line"></span><br><span class="line">    &lt;template #footer&gt; &lt;p&gt;My Custom Footer&lt;/p&gt; &lt;/template&gt;</span><br><span class="line">  &lt;/LayoutComponent&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">import LayoutComponent from &quot;./LayoutComponent.vue&quot;;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>作用域插槽</strong>: 允许子组件在渲染插槽内容时，向父组件传递数据。父组件通过 <code>v-slot=&quot;slotProps&quot;</code> 接收。</p>
</li>
</ul>
</li>
<li><p><strong>自定义指令 (Custom Directives)</strong></p>
<ul>
<li><p>允许你封装可重用的底层 DOM 操作逻辑。</p>
</li>
<li><p>通过 <code>v-mydirective</code> 的形式在模板中使用。</p>
</li>
<li><p>定义指令时，可以提供 <code>created</code>, <code>beforeMount</code>, <code>mounted</code>, <code>beforeUpdate</code>, <code>updated</code>, <code>beforeUnmount</code>, <code>unmounted</code> 等钩子函数，接收 <code>el</code> (绑定的元素) 和 <code>binding</code> (指令信息) 等参数。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;input v-focus /&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">// 定义一个局部自定义指令 v-focus</span><br><span class="line">const vFocus = &#123;</span><br><span class="line">  mounted: (el) =&gt; &#123;</span><br><span class="line">    // 在元素挂载后自动聚焦</span><br><span class="line">    el.focus();</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>也可以全局注册指令 <code>app.directive(&#39;focus&#39;, &#123; ... &#125;)</code>。</p>
</li>
</ul>
</li>
<li><p><strong>Teleport</strong></p>
<ul>
<li><p>内置组件，允许将组件内部的一部分模板“传送”到 DOM 结构中的其他位置（通常是应用根节点之外，如 <code>&lt;body&gt;</code>）。</p>
</li>
<li><p>常用于创建模态框、通知、下拉菜单等需要脱离当前组件 DOM 结构进行渲染的场景。</p>
</li>
<li><p>逻辑关系（父子组件关系、Props、Events、Provide&#x2F;Inject）保持不变。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;button @click=&quot;showModal = true&quot;&gt;Show Modal&lt;/button&gt;</span><br><span class="line">  &lt;Teleport to=&quot;body&quot;&gt;</span><br><span class="line">    &lt;div v-if=&quot;showModal&quot; class=&quot;modal&quot;&gt;</span><br><span class="line">      &lt;p&gt;I am a modal!&lt;/p&gt;</span><br><span class="line">      &lt;button @click=&quot;showModal = false&quot;&gt;Close&lt;/button&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/Teleport&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">import &#123; ref &#125; from &quot;vue&quot;;</span><br><span class="line">const showModal = ref(false);</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style&gt;</span><br><span class="line">.modal &#123;</span><br><span class="line">  /* 样式 */</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p><strong>Suspense (实验性)</strong></p>
<ul>
<li><p>内置组件，用于在等待<strong>异步组件</strong>加载完成时，协调渲染<strong>备用内容</strong>（fallback）。</p>
</li>
<li><p>常与异步组件或路由懒加载结合使用，提升用户体验。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;Suspense&gt;</span><br><span class="line">    &lt;template #default&gt;</span><br><span class="line">      &lt;AsyncUserProfile /&gt;</span><br><span class="line">    &lt;/template&gt;</span><br><span class="line"></span><br><span class="line">    &lt;template #fallback&gt;</span><br><span class="line">      &lt;div&gt;Loading user profile...&lt;/div&gt;</span><br><span class="line">    &lt;/template&gt;</span><br><span class="line">  &lt;/Suspense&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">import &#123; defineAsyncComponent &#125; from &quot;vue&quot;;</span><br><span class="line">// 异步加载组件</span><br><span class="line">const AsyncUserProfile = defineAsyncComponent(() =&gt;</span><br><span class="line">  import(&quot;./UserProfile.vue&quot;)</span><br><span class="line">);</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ol>
<p><strong>五、关键改进与最佳实践</strong></p>
<ul>
<li><strong>性能提升</strong>: Vue 3 通过重写虚拟 DOM、编译时优化（静态提升、补丁标志）等手段，实现了显著的性能提升（更快的初始渲染、更新，更小的内存占用）。</li>
<li><strong>更好的 TypeScript 支持</strong>: Vue 3 的源码本身就是用 TypeScript 编写的，提供了出色的类型推断和 IDE 支持，尤其是在使用 <code>&lt;script setup&gt;</code> 和 Pinia 时。</li>
<li><strong>拥抱 Composition API</strong>: 对于新项目或需要更好逻辑复用和组织性的场景，优先使用 Composition API（特别是 <code>&lt;script setup&gt;</code> 语法）。</li>
<li><strong>使用 Pinia</strong>: 对于需要状态管理的应用，推荐使用 Pinia。</li>
<li><strong>利用 SFC</strong>: 单文件组件是组织 Vue 代码的标准和推荐方式。</li>
<li><strong>代码规范</strong>: 遵循官方推荐的风格指南，使用 ESLint、Prettier 等工具保持代码一致性。</li>
<li><strong>组件拆分</strong>: 保持组件功能单一、体积小，便于维护和复用。</li>
<li><strong>善用官方文档</strong>: Vue 的官方文档非常详细和清晰，是学习和解决问题的最佳资源 (<a target="_blank" rel="noopener" href="https://cn.vuejs.org/">https://cn.vuejs.org/</a>)。</li>
</ul>
<hr>
</article><div class="post-copyright"><div class="copyright-cc-box"><i class="anzhiyufont anzhiyu-icon-copyright"></i></div><div class="post-copyright__author_box"><a class="post-copyright__author_img" href="/" title="头像"><img class="post-copyright__author_img_back" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/04/27/64496e511b09c.jpg" title="头像" alt="头像"><img class="post-copyright__author_img_front" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/04/27/64496e511b09c.jpg" title="头像" alt="头像"></a><div class="post-copyright__author_name">Jackey Zhou</div><div class="post-copyright__author_desc"></div></div><div class="post-copyright__post__info"><a class="post-copyright__original" title="该文章为原创文章，注意版权协议" href="http://example.com/2025/05/12/vue3%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/">原创</a><a class="post-copyright-title"><span onclick="rm.copyPageUrl('http://example.com/2025/05/12/vue3%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/')">vue3基础知识</span></a></div><div class="post-tools" id="post-tools"><div class="post-tools-left"><div class="rewardLeftButton"><div class="post-reward" onclick="anzhiyu.addRewardMask()"><div class="reward-button button--animated" title="赞赏作者"><i class="anzhiyufont anzhiyu-icon-hand-heart-fill"></i>打赏作者</div><div class="reward-main"><div class="reward-all"><span class="reward-title">感谢你赐予我前进的力量</span><ul class="reward-group"><li class="reward-item"><a href="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-weichat.png" target="_blank"><img class="post-qr-code-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-weichat.png" alt="微信"/></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-alipay.png" target="_blank"><img class="post-qr-code-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-alipay.png" alt="支付宝"/></a><div class="post-qr-code-desc">支付宝</div></li></ul><a class="reward-main-btn" href="/about/#about-reward" target="_blank"><div class="reward-text">赞赏者名单</div><div class="reward-dec">因为你们的支持让我意识到写文章的价值🙏</div></a></div></div></div><div id="quit-box" onclick="anzhiyu.removeRewardMask()" style="display: none"></div></div><div class="shareRight"><div class="share-link mobile"><div class="share-qrcode"><div class="share-button" title="使用手机访问这篇文章"><i class="anzhiyufont anzhiyu-icon-qrcode"></i></div><div class="share-main"><div class="share-main-all"><div id="qrcode" title="http://example.com/2025/05/12/vue3%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/"></div><div class="reward-dec">使用手机访问这篇文章</div></div></div></div></div><div class="share-link weibo"><a class="share-button" target="_blank" href="https://service.weibo.com/share/share.php?title=vue3基础知识&amp;url=http://example.com/2025/05/12/vue3%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/&amp;pic=" rel="external nofollow noreferrer noopener"><i class="anzhiyufont anzhiyu-icon-weibo"></i></a></div><script>function copyCurrentPageUrl() {
  var currentPageUrl = window.location.href;
  var input = document.createElement("input");
  input.setAttribute("value", currentPageUrl);
  document.body.appendChild(input);
  input.select();
  input.setSelectionRange(0, 99999);
  document.execCommand("copy");
  document.body.removeChild(input);
}</script><div class="share-link copyurl"><div class="share-button" id="post-share-url" title="复制链接" onclick="copyCurrentPageUrl()"><i class="anzhiyufont anzhiyu-icon-link"></i></div></div></div></div></div><div class="post-copyright__notice"><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://example.com" target="_blank">Welcome To LifeTech's Blog</a>！</span></div></div><div class="post-tools-right"><div class="tag_share"><div class="post-meta__box"><div class="post-meta__box__tag-list"><a class="post-meta__box__tags" href="/tags/%E5%89%8D%E7%AB%AF%E5%AD%A6%E4%B9%A0/"><span class="tags-punctuation"> <i class="anzhiyufont anzhiyu-icon-tag"></i></span>前端学习<span class="tagsPageCount">1</span></a></div></div></div><div class="post_share"><div class="social-share" data-image="https://bu.dusays.com/2023/04/27/64496e511b09c.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.cbd.int/butterfly-extsrc@1.1.3/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"/><script src="https://cdn.cbd.int/butterfly-extsrc@1.1.3/sharejs/dist/js/social-share.min.js" defer="defer"></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2025/05/12/%E6%A8%A1%E5%9E%8B%E9%83%A8%E7%BD%B2/"><img class="prev-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">模型部署</div></div></a></div><div class="next-post pull-right"><a href="/2025/05/15/tauri%E5%89%8D%E5%90%8E%E7%AB%AF%E4%BA%A4%E4%BA%92/"><img class="next-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">tauri前后端交互</div></div></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="card-content"><div class="author-info-avatar"><img class="avatar-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/04/27/64496e511b09c.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__description">记录技术成长的个人博客</div></div></div><div class="card-widget anzhiyu-right-widget" id="card-wechat" onclick="null"><div id="flip-wrapper"><div id="flip-content"><div class="face" style="background: url(https://bu.dusays.com/2023/01/13/63c02edf44033.png) center center / 100% no-repeat"></div><div class="back face" style="background: url(https://bu.dusays.com/2023/05/13/645fa415e8694.png) center center / 100% no-repeat"></div></div></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-bars"></i><span>文章目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Vue-3-%E5%B8%B8%E7%94%A8%E7%9F%A5%E8%AF%86%E6%96%87%E6%A1%A3-%E6%88%AA%E8%87%B3-2025-%E5%B9%B4-5-%E6%9C%88"><span class="toc-number">1.</span> <span class="toc-text">Vue 3 常用知识文档 (截至 2025 年 5 月)</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%80%E3%80%81%E6%A0%B8%E5%BF%83%E6%A6%82%E5%BF%B5%E4%B8%8E%E6%96%B0%E7%89%B9%E6%80%A7"><span class="toc-number">1.1.</span> <span class="toc-text">一、核心概念与新特性</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-Composition-API-%E7%BB%84%E5%90%88%E5%BC%8F-API"><span class="toc-number">1.1.1.</span> <span class="toc-text">1. Composition API (组合式 API)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-Reactivity-%E5%93%8D%E5%BA%94%E5%BC%8F%E7%B3%BB%E7%BB%9F"><span class="toc-number">1.1.2.</span> <span class="toc-text">2. Reactivity (响应式系统)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E9%92%A9%E5%AD%90-Lifecycle-Hooks"><span class="toc-number">1.1.3.</span> <span class="toc-text">3. 生命周期钩子 (Lifecycle Hooks)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-Fragments-%E7%89%87%E6%AE%B5"><span class="toc-number">1.1.4.</span> <span class="toc-text">4. Fragments (片段)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-Teleport-%E4%BC%A0%E9%80%81%E9%97%A8"><span class="toc-number">1.1.5.</span> <span class="toc-text">5. Teleport (传送门)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-Suspense-%E5%AE%9E%E9%AA%8C%E6%80%A7"><span class="toc-number">1.1.6.</span> <span class="toc-text">6. Suspense (实验性)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7-emits-%E9%80%89%E9%A1%B9%E5%92%8C-defineEmits"><span class="toc-number">1.1.7.</span> <span class="toc-text">7. emits 选项和 defineEmits</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#8-v-model-%E7%9A%84%E6%94%B9%E8%BF%9B"><span class="toc-number">1.1.8.</span> <span class="toc-text">8. v-model 的改进</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#9-%E5%85%A8%E5%B1%80-API-%E7%9A%84%E5%8F%98%E6%9B%B4"><span class="toc-number">1.1.9.</span> <span class="toc-text">9. 全局 API 的变更</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#10-Tree-shaking-%E4%BC%98%E5%8C%96"><span class="toc-number">1.1.10.</span> <span class="toc-text">10. Tree-shaking 优化</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#11"><span class="toc-number">1.1.11.</span> <span class="toc-text">11. &lt;script setup&gt;</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%8C%E3%80%81%E7%BB%84%E4%BB%B6-Components"><span class="toc-number">1.2.</span> <span class="toc-text">二、组件 (Components)</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-Props"><span class="toc-number">1.2.1.</span> <span class="toc-text">1. Props</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-Events-%E4%BA%8B%E4%BB%B6"><span class="toc-number">1.2.2.</span> <span class="toc-text">2. Events (事件)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-Slots-%E6%8F%92%E6%A7%BD"><span class="toc-number">1.2.3.</span> <span class="toc-text">3. Slots (插槽)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-Provide-Inject"><span class="toc-number">1.2.4.</span> <span class="toc-text">4. Provide &#x2F; Inject</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-%E5%8A%A8%E6%80%81%E7%BB%84%E4%BB%B6"><span class="toc-number">1.2.5.</span> <span class="toc-text">5. 动态组件 (&lt;component :is&#x3D;&quot;...&quot;&gt;)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-%E5%BC%82%E6%AD%A5%E7%BB%84%E4%BB%B6-defineAsyncComponent"><span class="toc-number">1.2.6.</span> <span class="toc-text">6. 异步组件 (defineAsyncComponent)</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%89%E3%80%81%E6%A8%A1%E6%9D%BF%E8%AF%AD%E6%B3%95-Template-Syntax"><span class="toc-number">1.3.</span> <span class="toc-text">三、模板语法 (Template Syntax)</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E6%8F%92%E5%80%BC-Interpolation"><span class="toc-number">1.3.1.</span> <span class="toc-text">1. 插值 (Interpolation)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E6%8C%87%E4%BB%A4-Directives"><span class="toc-number">1.3.2.</span> <span class="toc-text">2. 指令 (Directives)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-%E8%87%AA%E5%AE%9A%E4%B9%89%E6%8C%87%E4%BB%A4-Custom-Directives"><span class="toc-number">1.3.3.</span> <span class="toc-text">3. 自定义指令 (Custom Directives)</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9B%9B%E3%80%81%E8%B7%AF%E7%94%B1-Routing-with-Vue-Router"><span class="toc-number">1.4.</span> <span class="toc-text">四、路由 (Routing with Vue Router)</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E5%AE%89%E8%A3%85%E5%92%8C%E5%9F%BA%E6%9C%AC%E9%85%8D%E7%BD%AE"><span class="toc-number">1.4.1.</span> <span class="toc-text">1. 安装和基本配置</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E8%B7%AF%E7%94%B1%E7%BB%84%E4%BB%B6"><span class="toc-number">1.4.2.</span> <span class="toc-text">2. 路由组件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-%E7%BC%96%E7%A8%8B%E5%BC%8F%E5%AF%BC%E8%88%AA"><span class="toc-number">1.4.3.</span> <span class="toc-text">3. 编程式导航</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-%E8%B7%AF%E7%94%B1%E5%8F%82%E6%95%B0"><span class="toc-number">1.4.4.</span> <span class="toc-text">4. 路由参数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-%E5%AF%BC%E8%88%AA%E5%AE%88%E5%8D%AB-Navigation-Guards"><span class="toc-number">1.4.5.</span> <span class="toc-text">5. 导航守卫 (Navigation Guards)</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%94%E3%80%81%E7%8A%B6%E6%80%81%E7%AE%A1%E7%90%86-State-Management-with-Pinia"><span class="toc-number">1.5.</span> <span class="toc-text">五、状态管理 (State Management with Pinia)</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E5%AE%89%E8%A3%85%E5%92%8C%E5%9F%BA%E6%9C%AC%E9%85%8D%E7%BD%AE-1"><span class="toc-number">1.5.1.</span> <span class="toc-text">1. 安装和基本配置</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E5%AE%9A%E4%B9%89-Store"><span class="toc-number">1.5.2.</span> <span class="toc-text">2. 定义 Store</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-%E5%9C%A8%E7%BB%84%E4%BB%B6%E4%B8%AD%E4%BD%BF%E7%94%A8-Store"><span class="toc-number">1.5.3.</span> <span class="toc-text">3. 在组件中使用 Store</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-Store-%E7%9A%84%E4%B8%BB%E8%A6%81%E7%89%B9%E6%80%A7"><span class="toc-number">1.5.4.</span> <span class="toc-text">4. Store 的主要特性</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%AD%E3%80%81%E5%85%B6%E4%BB%96%E9%87%8D%E8%A6%81%E7%89%B9%E6%80%A7%E4%B8%8E%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5"><span class="toc-number">1.6.</span> <span class="toc-text">六、其他重要特性与最佳实践</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-TypeScript-%E6%94%AF%E6%8C%81"><span class="toc-number">1.6.1.</span> <span class="toc-text">1. TypeScript 支持</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96"><span class="toc-number">1.6.2.</span> <span class="toc-text">2. 性能优化</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-%E6%A0%87%E7%AD%BE%E7%9A%84-v-bind"><span class="toc-number">1.6.3.</span> <span class="toc-text">3. &lt;style&gt; 标签的 v-bind</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-%E7%BB%84%E5%90%88%E5%BC%8F%E5%87%BD%E6%95%B0-Composables"><span class="toc-number">1.6.4.</span> <span class="toc-text">4. 组合式函数 (Composables)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5%E5%BB%BA%E8%AE%AE"><span class="toc-number">1.6.5.</span> <span class="toc-text">5. 最佳实践建议</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%83%E3%80%81%E4%BB%8E-Vue-2-%E8%BF%81%E7%A7%BB"><span class="toc-number">1.7.</span> <span class="toc-text">七、从 Vue 2 迁移</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-history"></i><span>最近发布</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/05/15/tauri%E5%89%8D%E5%90%8E%E7%AB%AF%E4%BA%A4%E4%BA%92/" title="tauri前后端交互">tauri前后端交互</a><time datetime="2025-05-14T16:28:49.000Z" title="发表于 2025-05-15 00:28:49">2025-05-15</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/05/12/vue3%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/" title="vue3基础知识">vue3基础知识</a><time datetime="2025-05-12T15:28:53.000Z" title="发表于 2025-05-12 23:28:53">2025-05-12</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/05/12/%E6%A8%A1%E5%9E%8B%E9%83%A8%E7%BD%B2/" title="模型部署">模型部署</a><time datetime="2025-05-11T18:17:36.000Z" title="发表于 2025-05-12 02:17:36">2025-05-12</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/05/12/%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6%E4%B8%8E%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/" title="数据科学与机器学习">数据科学与机器学习</a><time datetime="2025-05-11T18:17:28.000Z" title="发表于 2025-05-12 02:17:28">2025-05-12</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/05/12/pytorch%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/" title="pytorch基础知识">pytorch基础知识</a><time datetime="2025-05-11T18:17:15.000Z" title="发表于 2025-05-12 02:17:15">2025-05-12</time></div></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"></div><div id="footer-bar"><div class="footer-bar-links"><div class="footer-bar-left"><div id="footer-bar-tips"><div class="copyright">&copy;2020 - 2025 By <a class="footer-bar-link" href="/" title="Jackey Zhou" target="_blank">Jackey Zhou</a></div></div><div id="footer-type-tips"></div></div><div class="footer-bar-right"><a class="footer-bar-link" target="_blank" rel="noopener" href="https://github.com/anzhiyu-c/hexo-theme-anzhiyu" title="主题">主题</a></div></div></div></footer></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="sidebar-site-data site-data is-center"><a href="/archives/" title="archive"><div class="headline">文章</div><div class="length-num">52</div></a><a href="/tags/" title="tag"><div class="headline">标签</div><div class="length-num">16</div></a><a href="/categories/" title="category"><div class="headline">分类</div><div class="length-num">0</div></a></div><span class="sidebar-menu-item-title">功能</span><div class="sidebar-menu-item"><a class="darkmode_switchbutton menu-child" href="javascript:void(0);" title="显示模式"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span>显示模式</span></a></div><div class="back-menu-list-groups"><div class="back-menu-list-group"><div class="back-menu-list-title">网页</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://blog.anheyu.com/" title="博客"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/favicon.ico" alt="博客"/><span class="back-menu-item-text">博客</span></a></div></div><div class="back-menu-list-group"><div class="back-menu-list-title">项目</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://image.anheyu.com/" title="安知鱼图床"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://image.anheyu.com/favicon.ico" alt="安知鱼图床"/><span class="back-menu-item-text">安知鱼图床</span></a></div></div></div><span class="sidebar-menu-item-title">标签</span><div class="card-tags"><div class="item-headline"></div><div class="card-tag-cloud"><a href="/tags/CSharp%E5%AD%A6%E4%B9%A0/" style="font-size: 0.88rem;">CSharp学习<sup>3</sup></a><a href="/tags/IDE%E5%B8%B8%E7%94%A8%E5%BF%AB%E6%8D%B7%E9%94%AE/" style="font-size: 0.88rem;">IDE常用快捷键<sup>2</sup></a><a href="/tags/Rust%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/" style="font-size: 0.88rem;">Rust基础知识<sup>21</sup></a><a href="/tags/csharp%E7%9B%B8%E5%85%B3%E5%AD%A6%E4%B9%A0/" style="font-size: 0.88rem;">csharp相关学习<sup>5</sup></a><a href="/tags/docker%E5%AD%A6%E4%B9%A0/" style="font-size: 0.88rem;">docker学习<sup>1</sup></a><a href="/tags/hexo%E5%8D%9A%E5%AE%A2%E5%B8%B8%E8%A7%81%E5%91%BD%E4%BB%A4/" style="font-size: 0.88rem;">hexo博客常见命令<sup>1</sup></a><a href="/tags/python%E7%9B%B8%E5%85%B3%E5%AD%A6%E4%B9%A0/" style="font-size: 0.88rem;">python相关学习<sup>4</sup></a><a href="/tags/tauri%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/" style="font-size: 0.88rem;">tauri基础知识<sup>1</sup></a><a href="/tags/xmake%E5%AD%A6%E4%B9%A0/" style="font-size: 0.88rem;">xmake学习<sup>3</sup></a><a href="/tags/%E4%B8%AA%E4%BA%BA%E5%AD%A6%E4%B9%A0/" style="font-size: 0.88rem;">个人学习<sup>1</sup></a><a href="/tags/%E5%89%8D%E7%AB%AF%E5%AD%A6%E4%B9%A0/" style="font-size: 0.88rem;">前端学习<sup>1</sup></a><a href="/tags/%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/" style="font-size: 0.88rem;">数据分析<sup>1</sup></a><a href="/tags/%E6%97%A0%E7%BA%BF%E8%B0%83%E8%AF%95/" style="font-size: 0.88rem;">无线调试<sup>1</sup></a><a href="/tags/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/" style="font-size: 0.88rem;">深度学习<sup>1</sup></a><a href="/tags/%E7%B3%BB%E7%BB%9F%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/" style="font-size: 0.88rem;">系统常用命令<sup>2</sup></a><a href="/tags/%E7%B3%BB%E7%BB%9F%E5%B8%B8%E7%94%A8%E5%BF%AB%E6%8D%B7%E9%94%AE/" style="font-size: 0.88rem;">系统常用快捷键<sup>2</sup></a></div></div><hr/></div></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="anzhiyufont anzhiyu-icon-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="anzhiyufont anzhiyu-icon-gear"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="anzhiyufont anzhiyu-icon-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></button></div></div><div id="nav-music"><a id="nav-music-hoverTips" onclick="anzhiyu.musicToggle()" accesskey="m">播放音乐</a><div id="console-music-bg"></div><meting-js id="8152976493" server="netease" type="playlist" mutex="true" preload="none" theme="var(--anzhiyu-main)" data-lrctype="0" order="random" volume="0.7"></meting-js></div><div id="rightMenu"><div class="rightMenu-group rightMenu-small"><div class="rightMenu-item" id="menu-backward"><i class="anzhiyufont anzhiyu-icon-arrow-left"></i></div><div class="rightMenu-item" id="menu-forward"><i class="anzhiyufont anzhiyu-icon-arrow-right"></i></div><div class="rightMenu-item" id="menu-refresh"><i class="anzhiyufont anzhiyu-icon-arrow-rotate-right" style="font-size: 1rem;"></i></div><div class="rightMenu-item" id="menu-top"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></div></div><div class="rightMenu-group rightMenu-line rightMenuPlugin"><div class="rightMenu-item" id="menu-copytext"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制选中文本</span></div><div class="rightMenu-item" id="menu-pastetext"><i class="anzhiyufont anzhiyu-icon-paste"></i><span>粘贴文本</span></div><a class="rightMenu-item" id="menu-commenttext"><i class="anzhiyufont anzhiyu-icon-comment-medical"></i><span>引用到评论</span></a><div class="rightMenu-item" id="menu-newwindow"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开</span></div><div class="rightMenu-item" id="menu-copylink"><i class="anzhiyufont anzhiyu-icon-link"></i><span>复制链接地址</span></div><div class="rightMenu-item" id="menu-copyimg"><i class="anzhiyufont anzhiyu-icon-images"></i><span>复制此图片</span></div><div class="rightMenu-item" id="menu-downloadimg"><i class="anzhiyufont anzhiyu-icon-download"></i><span>下载此图片</span></div><div class="rightMenu-item" id="menu-newwindowimg"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开图片</span></div><div class="rightMenu-item" id="menu-search"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>站内搜索</span></div><div class="rightMenu-item" id="menu-searchBaidu"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>百度搜索</span></div><div class="rightMenu-item" id="menu-music-toggle"><i class="anzhiyufont anzhiyu-icon-play"></i><span>播放音乐</span></div><div class="rightMenu-item" id="menu-music-back"><i class="anzhiyufont anzhiyu-icon-backward"></i><span>切换到上一首</span></div><div class="rightMenu-item" id="menu-music-forward"><i class="anzhiyufont anzhiyu-icon-forward"></i><span>切换到下一首</span></div><div class="rightMenu-item" id="menu-music-playlist" onclick="window.open(&quot;https://y.qq.com/n/ryqq/playlist/8802438608&quot;, &quot;_blank&quot;);" style="display: none;"><i class="anzhiyufont anzhiyu-icon-radio"></i><span>查看所有歌曲</span></div><div class="rightMenu-item" id="menu-music-copyMusicName"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制歌名</span></div></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item menu-link" id="menu-randomPost"><i class="anzhiyufont anzhiyu-icon-shuffle"></i><span>随便逛逛</span></a><a class="rightMenu-item menu-link" href="/categories/"><i class="anzhiyufont anzhiyu-icon-cube"></i><span>博客分类</span></a><a class="rightMenu-item menu-link" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags"></i><span>文章标签</span></a></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item" id="menu-copy" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制地址</span></a><a class="rightMenu-item" id="menu-commentBarrage" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-message"></i><span class="menu-commentBarrage-text">关闭热评</span></a><a class="rightMenu-item" id="menu-darkmode" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span class="menu-darkmode-text">深色模式</span></a><a class="rightMenu-item" id="menu-translate" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-language"></i><span>轉為繁體</span></a></div></div><div id="rightmenu-mask"></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.cbd.int/@fancyapps/ui@5.0.28/dist/fancybox/fancybox.umd.js"></script><script src="https://cdn.cbd.int/instant.page@5.2.0/instantpage.js" type="module"></script><script src="https://cdn.cbd.int/vanilla-lazyload@17.8.5/dist/lazyload.iife.min.js"></script><script src="https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.js"></script><canvas id="universe"></canvas><script async src="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.0/dark/dark.js"></script><script>// 消除控制台打印
var HoldLog = console.log;
console.log = function () {};
let now1 = new Date();
queueMicrotask(() => {
  const Log = function () {
    HoldLog.apply(console, arguments);
  }; //在恢复前输出日志
  const grt = new Date("04/01/2021 00:00:00"); //此处修改你的建站时间或者网站上线时间
  now1.setTime(now1.getTime() + 250);
  const days = (now1 - grt) / 1000 / 60 / 60 / 24;
  const dnum = Math.floor(days);
  const ascll = [
    `欢迎使用安知鱼!`,
    `生活明朗, 万物可爱`,
    `
        
       █████╗ ███╗   ██╗███████╗██╗  ██╗██╗██╗   ██╗██╗   ██╗
      ██╔══██╗████╗  ██║╚══███╔╝██║  ██║██║╚██╗ ██╔╝██║   ██║
      ███████║██╔██╗ ██║  ███╔╝ ███████║██║ ╚████╔╝ ██║   ██║
      ██╔══██║██║╚██╗██║ ███╔╝  ██╔══██║██║  ╚██╔╝  ██║   ██║
      ██║  ██║██║ ╚████║███████╗██║  ██║██║   ██║   ╚██████╔╝
      ╚═╝  ╚═╝╚═╝  ╚═══╝╚══════╝╚═╝  ╚═╝╚═╝   ╚═╝    ╚═════╝
        
        `,
    "已上线",
    dnum,
    "天",
    "©2020 By 安知鱼 V1.6.14",
  ];
  const ascll2 = [`NCC2-036`, `调用前置摄像头拍照成功，识别为【小笨蛋】.`, `Photo captured: `, `🤪`];

  setTimeout(
    Log.bind(
      console,
      `\n%c${ascll[0]} %c ${ascll[1]} %c ${ascll[2]} %c${ascll[3]}%c ${ascll[4]}%c ${ascll[5]}\n\n%c ${ascll[6]}\n`,
      "color:#425AEF",
      "",
      "color:#425AEF",
      "color:#425AEF",
      "",
      "color:#425AEF",
      ""
    )
  );
  setTimeout(
    Log.bind(
      console,
      `%c ${ascll2[0]} %c ${ascll2[1]} %c \n${ascll2[2]} %c\n${ascll2[3]}\n`,
      "color:white; background-color:#4fd953",
      "",
      "",
      'background:url("https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/tinggge.gif") no-repeat;font-size:450%'
    )
  );

  setTimeout(Log.bind(console, "%c WELCOME %c 你好，小笨蛋.", "color:white; background-color:#4f90d9", ""));

  setTimeout(
    console.warn.bind(
      console,
      "%c ⚡ Powered by 安知鱼 %c 你正在访问 Jackey Zhou 的博客.",
      "color:white; background-color:#f0ad4e",
      ""
    )
  );

  setTimeout(Log.bind(console, "%c W23-12 %c 你已打开控制台.", "color:white; background-color:#4f90d9", ""));

  setTimeout(
    console.warn.bind(console, "%c S013-782 %c 你现在正处于监控中.", "color:white; background-color:#d9534f", "")
  );
});</script><script async src="/anzhiyu/random.js"></script><div class="js-pjax"><input type="hidden" name="page-type" id="page-type" value="post"></div><script>var visitorMail = "";
</script><script async data-pjax src="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/waterfall/waterfall.js"></script><script src="https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/qrcodejs/1.0.0/qrcode.min.js"></script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.1.9/icon/ali_iconfont_css.css"><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/aplayer/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdn.cbd.int/anzhiyu-blog-static@1.0.1/js/APlayer.min.js"></script><script src="https://cdn.cbd.int/hexo-anzhiyu-music@1.0.1/assets/js/Meting2.min.js"></script><script src="https://cdn.cbd.int/pjax@0.2.8/pjax.min.js"></script><script>let pjaxSelectors = ["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]
var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {
  // removeEventListener scroll 
  anzhiyu.removeGlobalFnEvent('pjax')
  anzhiyu.removeGlobalFnEvent('themeChange')

  document.getElementById('rightside').classList.remove('rightside-show')
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')
})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()
})

document.addEventListener('pjax:error', e => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script charset="UTF-8" src="https://cdn.cbd.int/anzhiyu-theme-static@1.1.5/accesskey/accesskey.js"></script></div><div id="popup-window"><div class="popup-window-title">通知</div><div class="popup-window-divider"></div><div class="popup-window-content"><div class="popup-tip">你好呀</div><div class="popup-link"><i class="anzhiyufont anzhiyu-icon-arrow-circle-right"></i></div></div></div></body></html>